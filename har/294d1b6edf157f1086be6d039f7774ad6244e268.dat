import{$ as hr,$a as he,$b as to,A as Ye,Aa as Tr,Ab as Y,B as u,Ba as Ir,Bb as Hr,C as y,Ca as wt,Cb as At,D as ar,Da as nn,Db as re,E as lr,Ea as kr,Eb as Ci,F as f,Fa as Tt,Fb as Ce,G as cr,Ga as rn,Gb as Wr,H as h,Ha as yi,Hb as Gr,I as ut,Ia as Ue,Ib as Qr,J as c,Ja as le,Jb as rt,K as l,Ka as qe,L as v,La as Je,Lb as Ei,M as A,Ma as Mr,Mb as Pt,N as P,Na as xr,Nb as Ot,O as J,Oa as Jt,Ob as Nt,P as x,Pa as Ar,Pb as Dt,Q as k,Qa as Ze,Qb as Rt,R as He,Rb as Ft,S as Xe,Sa as Pr,Sb as Lt,T as mr,Ta as It,Tb as Bt,U as dr,Ua as kt,Ub as $t,V as ur,Va as Mt,Vb as jt,W as V,Wa as vi,Wb as Yr,X as d,Xa as Or,Xb as Xr,Y as D,Ya as Nr,Yb as Jr,Z as ae,Za as et,Zb as Zr,_ as pr,_a as Dr,_b as eo,a as ui,aa as fr,ab as ee,b as er,ba as B,bb as Rr,c as de,ca as De,cb as on,d as se,da as tn,db as Fr,e as pi,ea as O,eb as Lr,f as hi,fa as te,fb as Br,g as tr,ga as ie,gb as G,h as ir,ha as Z,hb as $r,i as Te,ia as gr,ib as Si,j as fi,ja as _r,jb as jr,jc as io,k as nr,ka as xe,kb as Vr,l as rr,la as U,lb as Ur,m as Qe,ma as Se,mb as ze,n as $,na as yr,nb as tt,o as F,oa as vr,ob as qr,p as W,pa as be,pb as Pe,q as Ct,qa as gi,qb as it,r as q,ra as Ae,rb as xt,s as Zi,sa as Sr,t as M,ta as br,tb as bi,u as Et,ua as Cr,ub as nt,v as or,va as Er,vb as zr,w as z,wa as _i,wb as Kr,x as K,xa as N,xb as Oe,y as sr,ya as Ve,yb as Q,z as en,za as wr,zb as ne}from"./chunk-UMAWTBKE.js";function no(n){return new F(3e3,!1)}function us(){return new F(3100,!1)}function ps(){return new F(3101,!1)}function hs(n){return new F(3001,!1)}function fs(n){return new F(3003,!1)}function gs(n){return new F(3004,!1)}function _s(n,e){return new F(3005,!1)}function ys(){return new F(3006,!1)}function vs(){return new F(3007,!1)}function Ss(n,e){return new F(3008,!1)}function bs(n){return new F(3002,!1)}function Cs(n,e,t,i,r){return new F(3010,!1)}function Es(){return new F(3011,!1)}function ws(){return new F(3012,!1)}function Ts(){return new F(3200,!1)}function Is(){return new F(3202,!1)}function ks(){return new F(3013,!1)}function Ms(n){return new F(3014,!1)}function xs(n){return new F(3015,!1)}function As(n){return new F(3016,!1)}function Ps(n,e){return new F(3404,!1)}function Os(n){return new F(3502,!1)}function Ns(n){return new F(3503,!1)}function Ds(){return new F(3300,!1)}function Rs(n){return new F(3504,!1)}function Fs(n){return new F(3301,!1)}function Ls(n,e){return new F(3302,!1)}function Bs(n){return new F(3303,!1)}function $s(n,e){return new F(3400,!1)}function js(n){return new F(3401,!1)}function Vs(n){return new F(3402,!1)}function Us(n,e){return new F(3505,!1)}function ot(n){switch(n.length){case 0:return new Tt;case 1:return n[0];default:return new rn(n)}}function yo(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(m=>{let p=m.get("offset"),_=p==s,g=_&&a||new Map;m.forEach((C,w)=>{let b=w,I=C;if(w!=="offset")switch(b=n.normalizePropertyName(b,r),I){case yi:I=t.get(w);break;case Ve:I=i.get(w);break;default:I=n.normalizeStyleValue(w,b,I,r);break}g.set(b,I)}),_||o.push(g),a=g,s=p}),r.length)throw Os(r);return o}function Mn(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&sn(t,"start",n)));break;case"done":n.onDone(()=>i(t&&sn(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&sn(t,"destroy",n)));break}}function sn(n,e,t){let i=t.totalTime,r=!!t.disabled,o=xn(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function xn(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function ke(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function ro(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var qs=typeof document>"u"?null:document.documentElement;function An(n){let e=n.parentNode||n.host||null;return e===qs?null:e}function zs(n){return n.substring(1,6)=="ebkit"}var pt=null,oo=!1;function Ks(n){pt||(pt=Hs()||{},oo=pt.style?"WebkitAppearance"in pt.style:!1);let e=!0;return pt.style&&!zs(n)&&(e=n in pt.style,!e&&oo&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in pt.style)),e}function Hs(){return typeof document<"u"?document.body:null}function vo(n,e){for(;e;){if(e===n)return!0;e=An(e)}return!1}function So(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var Pn=(()=>{let e=class e{validateStyleProperty(i){return Ks(i)}containsElement(i,r){return vo(i,r)}getParentElement(i){return An(i)}query(i,r,o){return So(i,r,o)}computeStyle(i,r,o){return o||""}animate(i,r,o,s,a,m=[],p){return new Tt(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Rn=class Rn{};Rn.NOOP=new Pn;var gt=Rn,_t=class{};var Ws=1e3,bo="{{",Gs="}}",Co="ng-enter",un="ng-leave",wi="ng-trigger",xi=".ng-trigger",so="ng-animating",pn=".ng-animating";function We(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:hn(parseFloat(e[1]),e[2])}function hn(n,e){switch(e){case"s":return n*Ws;default:return n}}function Ai(n,e,t){return n.hasOwnProperty("duration")?n:Qs(n,e,t)}function Qs(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(no(n)),{duration:0,delay:0,easing:""};r=hn(parseFloat(a[1]),a[2]);let m=a[3];m!=null&&(o=hn(parseFloat(m),a[4]));let p=a[5];p&&(s=p)}else r=n;if(!t){let a=!1,m=e.length;r<0&&(e.push(us()),a=!0),o<0&&(e.push(ps()),a=!0),a&&e.splice(m,0,no(n))}return{duration:r,delay:o,easing:s}}function Ys(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ke(n,e,t){e.forEach((i,r)=>{let o=On(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function ft(n,e){e.forEach((t,i)=>{let r=On(i);n.style[r]=""})}function Zt(n){return Array.isArray(n)?n.length==1?n[0]:Ir(n):n}function Xs(n,e,t){let i=e.params||{},r=Eo(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(hs(o))})}var fn=new RegExp(`${bo}\\s*(.+?)\\s*${Gs}`,"g");function Eo(n){let e=[];if(typeof n=="string"){let t;for(;t=fn.exec(n);)e.push(t[1]);fn.lastIndex=0}return e}function ti(n,e,t){let i=`${n}`,r=i.replace(fn,(o,s)=>{let a=e[s];return a==null&&(t.push(fs(s)),a=""),a.toString()});return r==i?n:r}var Js=/-+([a-z0-9])/g;function On(n){return n.replace(Js,(...e)=>e[1].toUpperCase())}function Zs(n,e){return n===0||e===0}function ea(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,Nn(n,a)))}}return e}function Ie(n,e,t){switch(e.type){case N.Trigger:return n.visitTrigger(e,t);case N.State:return n.visitState(e,t);case N.Transition:return n.visitTransition(e,t);case N.Sequence:return n.visitSequence(e,t);case N.Group:return n.visitGroup(e,t);case N.Animate:return n.visitAnimate(e,t);case N.Keyframes:return n.visitKeyframes(e,t);case N.Style:return n.visitStyle(e,t);case N.Reference:return n.visitReference(e,t);case N.AnimateChild:return n.visitAnimateChild(e,t);case N.AnimateRef:return n.visitAnimateRef(e,t);case N.Query:return n.visitQuery(e,t);case N.Stagger:return n.visitStagger(e,t);default:throw gs(e.type)}}function Nn(n,e){return window.getComputedStyle(n)[e]}var ta=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Pi=class extends _t{normalizePropertyName(e,t){return On(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(ta.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(_s(e,i))}return s+o}};var Oi="*";function ia(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>na(i,t,e)):t.push(n),t}function na(n,e,t){if(n[0]==":"){let m=ra(n,t);if(typeof m=="function"){e.push(m);return}n=m}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(xs(n)),e;let r=i[1],o=i[2],s=i[3];e.push(ao(r,s));let a=r==Oi&&s==Oi;o[0]=="<"&&!a&&e.push(ao(s,r))}function ra(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(As(n)),"* => *"}}var Ti=new Set(["true","1"]),Ii=new Set(["false","0"]);function ao(n,e){let t=Ti.has(n)||Ii.has(n),i=Ti.has(e)||Ii.has(e);return(r,o)=>{let s=n==Oi||n==r,a=e==Oi||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?Ti.has(n):Ii.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?Ti.has(e):Ii.has(e)),s&&a}}var wo=":self",oa=new RegExp(`s*${wo}s*,?`,"g");function To(n,e,t,i){return new gn(n).build(e,t,i)}var lo="",gn=class{constructor(e){this._driver=e}build(e,t,i){let r=new _n(t);return this._resetContextStyleTimingState(r),Ie(this,Zt(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=lo,e.collectedStyles=new Map,e.collectedStyles.set(lo,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(ys()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==N.State){let m=a,p=m.name;p.toString().split(/\s*,\s*/).forEach(_=>{m.name=_,o.push(this.visitState(m,t))}),m.name=p}else if(a.type==N.Transition){let m=this.visitTransition(a,t);i+=m.queryCount,r+=m.depCount,s.push(m)}else t.errors.push(vs())}),{type:N.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(m=>{Eo(m).forEach(p=>{s.hasOwnProperty(p)||o.add(p)})})}),o.size&&t.errors.push(Ss(e.name,[...o.values()]))}return{type:N.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Ie(this,Zt(e.animation),t),r=ia(e.expr,t.errors);return{type:N.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ht(e.options)}}visitSequence(e,t){return{type:N.Sequence,steps:e.steps.map(i=>Ie(this,i,t)),options:ht(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=Ie(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:N.Group,steps:o,options:ht(e.options)}}visitAnimate(e,t){let i=ca(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:wt({});if(o.type==N.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let p={};i.easing&&(p.easing=i.easing),s=wt(p)}t.currentTime+=i.duration+i.delay;let m=this.visitStyle(s,t);m.isEmptyStep=a,r=m}return t.currentAnimateTimings=null,{type:N.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Ve?i.push(a):t.errors.push(bs(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let m of a.values())if(m.toString().indexOf(bo)>=0){o=!0;break}}}),{type:N.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,m)=>{let p=t.collectedStyles.get(t.currentQuerySelector),_=p.get(m),g=!0;_&&(o!=r&&o>=_.startTime&&r<=_.endTime&&(t.errors.push(Cs(m,_.startTime,_.endTime,o,r)),g=!1),o=_.startTime),g&&p.set(m,{startTime:o,endTime:r}),t.options&&Xs(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:N.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Es()),i;let r=1,o=0,s=[],a=!1,m=!1,p=0,_=e.steps.map(oe=>{let ce=this._makeStyleAst(oe,t),ge=ce.offset!=null?ce.offset:la(ce.styles),ue=0;return ge!=null&&(o++,ue=ce.offset=ge),m=m||ue<0||ue>1,a=a||ue<p,p=ue,s.push(ue),ce});m&&t.errors.push(ws()),a&&t.errors.push(Ts());let g=e.steps.length,C=0;o>0&&o<g?t.errors.push(Is()):o==0&&(C=r/(g-1));let w=g-1,b=t.currentTime,I=t.currentAnimateTimings,H=I.duration;return _.forEach((oe,ce)=>{let ge=C>0?ce==w?1:C*ce:s[ce],ue=ge*H;t.currentTime=b+I.delay+ue,I.duration=ue,this._validateStyleAst(oe,t),oe.offset=ge,i.styles.push(oe)}),i}visitReference(e,t){return{type:N.Reference,animation:Ie(this,Zt(e.animation),t),options:ht(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:N.AnimateChild,options:ht(e.options)}}visitAnimateRef(e,t){return{type:N.AnimateRef,animation:this.visitReference(e.animation,t),options:ht(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=sa(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,ke(t.collectedStyles,t.currentQuerySelector,new Map);let a=Ie(this,Zt(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:N.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:ht(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(ks());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Ai(e.timings,t.errors,!0);return{type:N.Stagger,animation:Ie(this,Zt(e.animation),t),timings:i,options:null}}};function sa(n){let e=!!n.split(/\s*,\s*/).find(t=>t==wo);return e&&(n=n.replace(oa,"")),n=n.replace(/@\*/g,xi).replace(/@\w+/g,t=>xi+"-"+t.slice(1)).replace(/:animating/g,pn),[n,e]}function aa(n){return n?ui({},n):null}var _n=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function la(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function ca(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Ai(n,e).duration;return an(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=an(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=Ai(t,e);return an(r.duration,r.delay,r.easing)}function ht(n){return n?(n=ui({},n),n.params&&(n.params=aa(n.params))):n={},n}function an(n,e,t){return{duration:n,delay:e,easing:t}}function Dn(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var ii=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},ma=1,da=":enter",ua=new RegExp(da,"g"),pa=":leave",ha=new RegExp(pa,"g");function Io(n,e,t,i,r,o=new Map,s=new Map,a,m,p=[]){return new yn().buildKeyframes(n,e,t,i,r,o,s,a,m,p)}var yn=class{buildKeyframes(e,t,i,r,o,s,a,m,p,_=[]){p=p||new ii;let g=new vn(e,t,p,r,o,_,[]);g.options=m;let C=m.delay?We(m.delay):0;g.currentTimeline.delayNextStep(C),g.currentTimeline.setStyles([s],null,g.errors,m),Ie(this,i,g);let w=g.timelines.filter(b=>b.containsAnimation());if(w.length&&a.size){let b;for(let I=w.length-1;I>=0;I--){let H=w[I];if(H.element===t){b=H;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,g.errors,m)}return w.length?w.map(b=>b.buildKeyframes()):[Dn(t,[],[],[],0,C,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:We(ti(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?We(i.duration):null,a=i.delay!=null?We(i.delay):null;return s!==0&&e.forEach(m=>{let p=t.appendInstructionToTimeline(m,s,a);o=Math.max(o,p.duration+p.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Ie(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==N.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ni);let s=We(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Ie(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?We(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),Ie(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?ti(i,t.params,t.errors):i;return Ai(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==N.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(m=>{let p=m.offset||0;a.forwardTime(p*o),a.setStyles(m.styles,m.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?We(r.delay):0;o&&(t.previousNode.type===N.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ni);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let m=null;a.forEach((p,_)=>{t.currentQueryIndex=_;let g=t.createSubContext(e.options,p);o&&g.delayNextStep(o),p===t.element&&(m=g.currentTimeline),Ie(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe();let C=g.currentTimeline.currentTime;s=Math.max(s,C)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),m=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":m=a-m;break;case"full":m=i.currentStaggerTime;break}let _=t.currentTimeline;m&&_.delayNextStep(m);let g=_.currentTime;Ie(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-g+(r.startTime-i.currentTimeline.startTime)}},Ni={},vn=class n{constructor(e,t,i,r,o,s,a,m){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ni,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Di(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=We(i.duration)),i.delay!=null&&(r.delay=We(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=ti(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Ni,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Sn(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(ua,"."+this._enterClassName),e=e.replace(ha,"."+this._leaveClassName);let m=i!=1,p=this._driver.query(this.element,e,m);i!==0&&(p=i<0?p.slice(p.length+i,p.length):p.slice(0,i)),a.push(...p)}return!o&&a.length==0&&s.push(Ms(t)),a}},Di=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ma,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ve),this._currentKeyframe.set(t,Ve);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=fa(e,this._globalTimelineStyles);for(let[a,m]of s){let p=ti(m,o,i);this._pendingStyles.set(a,p),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ve),this._updateStyle(a,p)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,m)=>{let p=new Map([...this._backFill,...a]);p.forEach((_,g)=>{_===yi?e.add(g):_===Ve&&t.add(g)}),i||p.set("offset",m/this.duration),r.push(p)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],m=new Map(a);a.set("offset",0),m.set("offset",1),r=[a,m]}return Dn(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},Sn=class extends Di{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,m=new Map(e[0]);m.set("offset",0),o.push(m);let p=new Map(e[0]);p.set("offset",co(a)),o.push(p);let _=e.length-1;for(let g=1;g<=_;g++){let C=new Map(e[g]),w=C.get("offset"),b=t+w*i;C.set("offset",co(b/s)),o.push(C)}i=s,t=0,r="",e=o}return Dn(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function co(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function fa(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Ve)}else for(let[o,s]of r)t.set(o,s)}),t}function mo(n,e,t,i,r,o,s,a,m,p,_,g,C){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:m,preStyleProps:p,postStyleProps:_,totalTime:g,errors:C}}var ln={},Ri=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return ga(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,m,p,_){let g=[],C=this.ast.options&&this.ast.options.params||ln,w=a&&a.params||ln,b=this.buildStyles(i,w,g),I=m&&m.params||ln,H=this.buildStyles(r,I,g),oe=new Set,ce=new Map,ge=new Map,ue=r==="void",St={params:ko(I,C),delay:this.ast.options?.delay},$e=_?[]:Io(e,t,this.ast.animation,o,s,b,H,St,p,g),_e=0;return $e.forEach(ve=>{_e=Math.max(ve.duration+ve.delay,_e)}),g.length?mo(t,this._triggerName,i,r,ue,b,H,[],[],ce,ge,_e,g):($e.forEach(ve=>{let ct=ve.element,bt=ke(ce,ct,new Set);ve.preStyleProps.forEach(mt=>bt.add(mt));let Yn=ke(ge,ct,new Set);ve.postStyleProps.forEach(mt=>Yn.add(mt)),ct!==t&&oe.add(ct)}),mo(t,this._triggerName,i,r,ue,b,H,$e,[...oe.values()],ce,ge,_e))}};function ga(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function ko(n,e){let t=ui({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var bn=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=ko(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=ti(s,r,t));let m=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,m,s,t),i.set(a,s)})}),i}};function _a(n,e,t){return new Cn(n,e,t)}var Cn=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new bn(r.style,o,i))}),uo(this.states,"true","1"),uo(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Ri(e,r,this.states))}),this.fallbackTransition=ya(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function ya(n,e,t){let i=[(s,a)=>!0],r={type:N.Sequence,steps:[],options:null},o={type:N.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new Ri(n,o,e)}function uo(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var va=new ii,En=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],o=To(this._driver,t,i,r);if(i.length)throw Ns(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=yo(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=Io(this._driver,t,o,Co,un,new Map,new Map,i,va,r),s.forEach(_=>{let g=ke(a,_.element,new Map);_.postStyleProps.forEach(C=>g.set(C,null))})):(r.push(Ds()),s=[]),r.length)throw Rs(r);a.forEach((_,g)=>{_.forEach((C,w)=>{_.set(w,this._driver.computeStyle(g,w,Ve))})});let m=s.map(_=>{let g=a.get(_.element);return this._buildPlayer(_,new Map,g)}),p=ot(m);return this._playersById.set(e,p),p.onDestroy(()=>this.destroy(e)),this.players.push(p),p}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Fs(e);return t}listen(e,t,i,r){let o=xn(t,"","","");return Mn(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},po="ng-animate-queued",Sa=".ng-animate-queued",cn="ng-animate-disabled",ba=".ng-animate-disabled",Ca="ng-star-inserted",Ea=".ng-star-inserted",wa=[],Mo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ta={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Re="__ng_removed",ni=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=ka(r),i){let o=e,{value:s}=o,a=er(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},ei="void",mn=new ni(ei),wn=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ne(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw Ls(i,t);if(i==null||i.length==0)throw Bs(t);if(!Ma(i))throw $s(i,t);let o=ke(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=ke(this._engine.statesByElement,e,new Map);return a.has(t)||(Ne(e,wi),Ne(e,wi+"-"+t),a.set(t,mn)),()=>{this._engine.afterFlush(()=>{let m=o.indexOf(s);m>=0&&o.splice(m,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw js(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new ri(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Ne(e,wi),Ne(e,wi+"-"+t),this._engine.statesByElement.set(e,a=new Map));let m=a.get(t),p=new ni(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&m&&p.absorbOptions(m.options),a.set(t,p),m||(m=mn),!(p.value===ei)&&m.value===p.value){if(!Pa(m.params,p.params)){let I=[],H=o.matchStyles(m.value,m.params,I),oe=o.matchStyles(p.value,p.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{ft(e,H),Ke(e,oe)})}return}let C=ke(this._engine.playersByElement,e,[]);C.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let w=o.matchTransition(m.value,p.value,e,p.params),b=!1;if(!w){if(!r)return;w=o.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:w,fromState:m,toState:p,player:s,isFallbackTransition:b}),b||(Ne(e,po),s.onStart(()=>{Vt(e,po)})),s.onDone(()=>{let I=this.players.indexOf(s);I>=0&&this.players.splice(I,1);let H=this._engine.playersByElement.get(e);if(H){let oe=H.indexOf(s);oe>=0&&H.splice(oe,1)}}),this.players.push(s),C.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,xi,!0);i.forEach(r=>{if(r[Re])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((m,p)=>{if(s.set(p,m.value),this._triggers.has(p)){let _=this.trigger(e,p,ei,r);_&&a.push(_)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&ot(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let m=this._triggers.get(s).fallbackTransition,p=i.get(s)||mn,_=new ni(ei),g=new ri(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:m,fromState:p,toState:_,player:g,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Re];(!o||o===Mo)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ne(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let m=xn(o,i.triggerName,i.fromState.value,i.toState.value);m._data=e,Mn(i.player,a.phase,m,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Tn=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new wn(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let m=r.get(a);if(m){let p=i.indexOf(m);i.splice(p+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(ki(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!ki(t))return;let o=t[Re];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ne(e,cn)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Vt(e,cn))}removeNode(e,t,i){if(ki(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Re]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return ki(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,xi,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,pn,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ot(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Re];if(t&&t.setForRemoval){if(e[Re]=Mo,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(cn)&&this.markElementAsDisabled(e,!1),this.driver.query(e,ba,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Ne(r,Ca)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?ot(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw Vs(e)}_flushAnimations(e,t){let i=new ii,r=[],o=new Map,s=[],a=new Map,m=new Map,p=new Map,_=new Set;this.disabledNodes.forEach(S=>{_.add(S);let E=this.driver.query(S,Sa,!0);for(let T=0;T<E.length;T++)_.add(E[T])});let g=this.bodyNode,C=Array.from(this.statesByElement.keys()),w=go(C,this.collectedEnterElements),b=new Map,I=0;w.forEach((S,E)=>{let T=Co+I++;b.set(E,T),S.forEach(R=>Ne(R,T))});let H=[],oe=new Set,ce=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){let E=this.collectedLeaveElements[S],T=E[Re];T&&T.setForRemoval&&(H.push(E),oe.add(E),T.hasAnimation?this.driver.query(E,Ea,!0).forEach(R=>oe.add(R)):ce.add(E))}let ge=new Map,ue=go(C,Array.from(oe));ue.forEach((S,E)=>{let T=un+I++;ge.set(E,T),S.forEach(R=>Ne(R,T))}),e.push(()=>{w.forEach((S,E)=>{let T=b.get(E);S.forEach(R=>Vt(R,T))}),ue.forEach((S,E)=>{let T=ge.get(E);S.forEach(R=>Vt(R,T))}),H.forEach(S=>{this.processLeaveNode(S)})});let St=[],$e=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(t).forEach(T=>{let R=T.player,me=T.element;if(St.push(R),this.collectedEnterElements.length){let pe=me[Re];if(pe&&pe.setForMove){if(pe.previousTriggersValues&&pe.previousTriggersValues.has(T.triggerName)){let dt=pe.previousTriggersValues.get(T.triggerName),Me=this.statesByElement.get(T.element);if(Me&&Me.has(T.triggerName)){let di=Me.get(T.triggerName);di.value=dt,Me.set(T.triggerName,di)}}R.destroy();return}}let je=!g||!this.driver.containsElement(g,me),we=ge.get(me),Ge=b.get(me),X=this._buildInstruction(T,i,Ge,we,je);if(X.errors&&X.errors.length){$e.push(X);return}if(je){R.onStart(()=>ft(me,X.fromStyles)),R.onDestroy(()=>Ke(me,X.toStyles)),r.push(R);return}if(T.isFallbackTransition){R.onStart(()=>ft(me,X.fromStyles)),R.onDestroy(()=>Ke(me,X.toStyles)),r.push(R);return}let Zn=[];X.timelines.forEach(pe=>{pe.stretchStartingKeyframe=!0,this.disabledNodes.has(pe.element)||Zn.push(pe)}),X.timelines=Zn,i.append(me,X.timelines);let ds={instruction:X,player:R,element:me};s.push(ds),X.queriedElements.forEach(pe=>ke(a,pe,[]).push(R)),X.preStyleProps.forEach((pe,dt)=>{if(pe.size){let Me=m.get(dt);Me||m.set(dt,Me=new Set),pe.forEach((di,Ji)=>Me.add(Ji))}}),X.postStyleProps.forEach((pe,dt)=>{let Me=p.get(dt);Me||p.set(dt,Me=new Set),pe.forEach((di,Ji)=>Me.add(Ji))})});if($e.length){let S=[];$e.forEach(E=>{S.push(Us(E.triggerName,E.errors))}),St.forEach(E=>E.destroy()),this.reportError(S)}let _e=new Map,ve=new Map;s.forEach(S=>{let E=S.element;i.has(E)&&(ve.set(E,E),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,_e))}),r.forEach(S=>{let E=S.element;this._getPreviousPlayers(E,!1,S.namespaceId,S.triggerName,null).forEach(R=>{ke(_e,E,[]).push(R),R.destroy()})});let ct=H.filter(S=>_o(S,m,p)),bt=new Map;fo(bt,this.driver,ce,p,Ve).forEach(S=>{_o(S,m,p)&&ct.push(S)});let mt=new Map;w.forEach((S,E)=>{fo(mt,this.driver,new Set(S),m,yi)}),ct.forEach(S=>{let E=bt.get(S),T=mt.get(S);bt.set(S,new Map([...E?.entries()??[],...T?.entries()??[]]))});let Xi=[],Xn=[],Jn={};s.forEach(S=>{let{element:E,player:T,instruction:R}=S;if(i.has(E)){if(_.has(E)){T.onDestroy(()=>Ke(E,R.toStyles)),T.disabled=!0,T.overrideTotalTime(R.totalTime),r.push(T);return}let me=Jn;if(ve.size>1){let we=E,Ge=[];for(;we=we.parentNode;){let X=ve.get(we);if(X){me=X;break}Ge.push(we)}Ge.forEach(X=>ve.set(X,me))}let je=this._buildAnimation(T.namespaceId,R,_e,o,mt,bt);if(T.setRealPlayer(je),me===Jn)Xi.push(T);else{let we=this.playersByElement.get(me);we&&we.length&&(T.parentPlayer=ot(we)),r.push(T)}}else ft(E,R.fromStyles),T.onDestroy(()=>Ke(E,R.toStyles)),Xn.push(T),_.has(E)&&r.push(T)}),Xn.forEach(S=>{let E=o.get(S.element);if(E&&E.length){let T=ot(E);S.setRealPlayer(T)}}),r.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<H.length;S++){let E=H[S],T=E[Re];if(Vt(E,un),T&&T.hasAnimation)continue;let R=[];if(a.size){let je=a.get(E);je&&je.length&&R.push(...je);let we=this.driver.query(E,pn,!0);for(let Ge=0;Ge<we.length;Ge++){let X=a.get(we[Ge]);X&&X.length&&R.push(...X)}}let me=R.filter(je=>!je.destroyed);me.length?xa(this,E,me):this.processLeaveNode(E)}return H.length=0,Xi.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();let E=this.players.indexOf(S);this.players.splice(E,1)}),S.play()}),Xi}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let m=!o||o==ei;a.forEach(p=>{p.queued||!m&&p.triggerName!=r||s.push(p)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let m of t.timelines){let p=m.element,_=p!==o,g=ke(i,p,[]);this._getPreviousPlayers(p,_,s,a,t.toState).forEach(w=>{let b=w.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),w.destroy(),g.push(w)})}ft(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,m=t.element,p=[],_=new Set,g=new Set,C=t.timelines.map(b=>{let I=b.element;_.add(I);let H=I[Re];if(H&&H.removedBeforeQueried)return new Tt(b.duration,b.delay);let oe=I!==m,ce=Aa((i.get(I)||wa).map(_e=>_e.getRealPlayer())).filter(_e=>{let ve=_e;return ve.element?ve.element===I:!1}),ge=o.get(I),ue=s.get(I),St=yo(this._normalizer,b.keyframes,ge,ue),$e=this._buildPlayer(b,St,ce);if(b.subTimeline&&r&&g.add(I),oe){let _e=new ri(e,a,I);_e.setRealPlayer($e),p.push(_e)}return $e});p.forEach(b=>{ke(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>Ia(this.playersByQueriedElement,b.element,b))}),_.forEach(b=>Ne(b,so));let w=ot(C);return w.onDestroy(()=>{_.forEach(b=>Vt(b,so)),Ke(m,t.toStyles)}),g.forEach(b=>{ke(r,b,[]).push(w)}),w}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Tt(e.duration,e.delay)}},ri=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Tt,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Mn(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ke(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Ia(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function ka(n){return n??null}function ki(n){return n&&n.nodeType===1}function Ma(n){return n=="start"||n=="done"}function ho(n,e){let t=n.style.display;return n.style.display=e??"none",t}function fo(n,e,t,i,r){let o=[];t.forEach(m=>o.push(ho(m)));let s=[];i.forEach((m,p)=>{let _=new Map;m.forEach(g=>{let C=e.computeStyle(p,g,r);_.set(g,C),(!C||C.length==0)&&(p[Re]=Ta,s.push(p))}),n.set(p,_)});let a=0;return t.forEach(m=>ho(m,o[a++])),s}function go(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let m=o.get(a);if(m)return m;let p=a.parentNode;return t.has(p)?m=p:r.has(p)?m=i:m=s(p),o.set(a,m),m}return e.forEach(a=>{let m=s(a);m!==i&&t.get(m).push(a)}),t}function Ne(n,e){n.classList?.add(e)}function Vt(n,e){n.classList?.remove(e)}function xa(n,e,t){ot(t).onDone(()=>n.processLeaveNode(e))}function Aa(n){let e=[];return xo(n,e),e}function xo(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof rn?xo(i.players,e):e.push(i)}}function Pa(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function _o(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var qt=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Tn(e.body,t,i),this._timelineEngine=new En(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let m=[],p=[],_=To(this._driver,o,m,p);if(m.length)throw Ps(r,m);p.length&&void 0,a=_a(r,_,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=ro(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=ro(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Oa(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=dn(e[0]),e.length>1&&(i=dn(e[e.length-1]))):e instanceof Map&&(t=dn(e)),t||i?new In(n,t,i):null}var Ut=class Ut{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=Ut.initialStylesByElement.get(e);r||Ut.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Ke(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ke(this._element,this._initialStyles),this._endStyles&&(Ke(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ut.initialStylesByElement.delete(this._element),this._startStyles&&(ft(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ft(this._element,this._endStyles),this._endStyles=null),Ke(this._element,this._initialStyles),this._state=3)}};Ut.initialStylesByElement=new WeakMap;var In=Ut;function dn(n){let e=null;return n.forEach((t,i)=>{Na(i)&&(e=e||new Map,e.set(i,t))}),e}function Na(n){return n==="display"||n==="position"}var Fi=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:Nn(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Li=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return vo(e,t)}getParentElement(e){return An(e)}query(e,t,i){return So(e,t,i)}computeStyle(e,t,i){return Nn(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",m={duration:i,delay:r,fill:a};o&&(m.easing=o);let p=new Map,_=s.filter(w=>w instanceof Fi);Zs(i,r)&&_.forEach(w=>{w.currentSnapshot.forEach((b,I)=>p.set(I,b))});let g=Ys(t).map(w=>new Map(w));g=ea(e,g,p);let C=Oa(e,g);return new Fi(e,g,m,C)}};var Mi="@",Ao="@.disabled",Bi=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==Mi&&t==Ao?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},kn=class extends Bi{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==Mi?t.charAt(1)=="."&&t==Ao?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==Mi){let r=Da(e),o=t.slice(1),s="";return o.charAt(0)!=Mi&&([o,s]=Ra(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let m=a._data||-1;this.factory.scheduleListenerCallback(m,i,a)})}return this.delegate.listen(e,t,i)}};function Da(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Ra(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var $i=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let p=this._rendererCache,_=p.get(r);if(!_){let g=()=>p.delete(r);_=new Bi(i,r,this.engine,g),p.set(r,_)}return _}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=p=>{Array.isArray(p)?p.forEach(a):this.engine.registerTrigger(o,s,e,p.name,p)};return t.data.animation.forEach(a),new kn(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var La=(()=>{let e=class e extends qt{constructor(i,r,o){super(i,r,o)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(q(gr),q(gt),q(_t))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function Ba(){return new Pi}function $a(n,e,t){return new $i(n,e,t)}var Oo=[{provide:_t,useFactory:Ba},{provide:qt,useClass:La},{provide:ar,useFactory:$a,deps:[Cr,qt,lr]}],Po=[{provide:gt,useFactory:()=>new Li},{provide:en,useValue:"BrowserAnimations"},...Oo],ja=[{provide:gt,useClass:Pn},{provide:en,useValue:"NoopAnimations"},...Oo],No=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?ja:Po}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Et({type:e}),e.\u0275inj=Ct({providers:Po,imports:[_i]});let n=e;return n})();var Fe=class{};var j=(()=>{let e=class e{constructor(){this.userData$=new pi(new Fe),this.searchItemValue$=new pi(""),this.wishlistItemcount$=new se,this.wishlistItem$=new pi([]),this.cartItemcount$=new se}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var st=(()=>{let e=class e{constructor(i,r){this.http=i,this.subscriptionService=r}login(i){return this.http.post("/api/login",i).pipe(Te(r=>(r&&r.token&&(this.oldUserId=localStorage.getItem("userId"),localStorage.setItem("authToken",r.token),this.setUserDetails(),localStorage.setItem("userId",r.userDetails.userId),this.subscriptionService.cartItemcount$.next(r.carItemCount)),r)))}setUserDetails(){if(localStorage.getItem("authToken")){let i=new Fe,r=JSON.parse(atob(localStorage.getItem("authToken").split(".")[1]));i.userId=r.userid,i.username=r.sub,i.userTypeId=Number(r.userTypeId),i.isLoggedIn=!0,this.subscriptionService.userData$.next(i)}}logout(){localStorage.clear(),this.resetSubscription(),this.setTempUserId()}setTempUserId(){if(!localStorage.getItem("userId")){let i=this.generateTempUserId();localStorage.setItem("userId",i.toString())}}generateTempUserId(){return Math.floor(Math.random()*88889+12345)}resetSubscription(){this.subscriptionService.userData$.next(new Fe),this.subscriptionService.wishlistItem$.next([]),this.subscriptionService.wishlistItemcount$.next(0),this.subscriptionService.cartItemcount$.next(0)}};e.\u0275fac=function(r){return new(r||e)(q(Ae),q(j))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var zt=function(n){return n[n.admin=1]="admin",n[n.user=2]="user",n}(zt||{});var Kt=(()=>{let e=class e{constructor(i){this.http=i,this.baseURL="/api/user/"}registerUser(i){return this.http.post(this.baseURL,i)}getCartItemCount(i){return this.http.get(this.baseURL+i)}validateUserName(i){return this.http.get(this.baseURL+"validateUserName/"+i)}};e.\u0275fac=function(r){return new(r||e)(q(Ae))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var at=(()=>{let e=class e{constructor(i,r){this.http=i,this.subscriptionService=r,this.baseURL="/api/Wishlist/"}toggleWishlistItem(i,r){return this.http.post(this.baseURL+`ToggleWishlist/${i}/${r}`,{}).pipe(Te(o=>(this.setWishlist(o),o)))}getWishlistItems(i){return this.http.get(this.baseURL+i).pipe(Te(r=>(this.setWishlist(r),r)))}clearWishlist(i){return this.http.delete(this.baseURL+`${i}`,{}).pipe(Te(r=>(this.subscriptionService.wishlistItem$.next([]),r)))}setWishlist(i){this.subscriptionService.wishlistItemcount$.next(i.length),this.subscriptionService.wishlistItem$.next(i)}};e.\u0275fac=function(r){return new(r||e)(q(Ae),q(j))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Va(n,e){if(n&1&&(c(0,"mat-option",4),d(1),l()),n&2){let t=e.$implicit;h("value",t.title),u(),ae(" ",t.title," ")}}var Do=(()=>{let e=class e{constructor(i,r,o){this.bookService=i,this.router=r,this.subscriptionService=o,this.searchControl=new Jt}ngOnInit(){this.loadBookData(),this.setSearchControlValue(),this.filterBookData()}searchStore(){let i=this.searchControl.value;i!==""&&this.router.navigate(["/search"],{queryParams:{item:i.toLowerCase()}})}cancelSearch(){this.router.navigate(["/"])}loadBookData(){this.bookService.books$.subscribe(i=>{this.books=i})}setSearchControlValue(){this.subscriptionService.searchItemValue$.subscribe(i=>{i?this.searchControl.setValue(i):this.searchControl.setValue("")})}filterBookData(){this.filteredBooks=this.searchControl.valueChanges.pipe(rr(""),Te(i=>i.length>=1?this._filter(i):[]))}_filter(i){let r=i.toLowerCase();return this.books?.filter(o=>o.title.toLowerCase().includes(r)||o.author.toLowerCase().includes(r))}};e.\u0275fac=function(r){return new(r||e)(y(Pe),y(he),y(j))},e.\u0275cmp=M({type:e,selectors:[["app-search"]],decls:6,vars:5,consts:[["auto","matAutocomplete"],["type","search","aria-label","search","placeholder","Search books or authors",1,"searchbox",3,"keydown.enter","search","formControl","matAutocomplete"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(r,o){if(r&1){let s=J();c(0,"form")(1,"input",1),x("keydown.enter",function(){return z(s),K(o.searchStore())})("search",function(){return z(s),K(o.cancelSearch())}),l(),c(2,"mat-autocomplete",2,0),x("optionSelected",function(){return z(s),K(o.searchStore())}),f(4,Va,2,2,"mat-option",3),O(5,"async"),l()()}if(r&2){let s=V(3);u(),h("formControl",o.searchControl)("matAutocomplete",s),u(3),h("ngForOf",te(5,3,o.filteredBooks))}},dependencies:[xe,Fr,zr,Kr,Ze,Ue,qe,Je,Pr,xr,Se],styles:[".searchbox[_ngcontent-%COMP%]{border:none;border-radius:2px;background-color:#fafafa;padding:5px 10px;height:50%;width:400px}input[type=search][_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]{min-width:30%}"]});let n=e;return n})();var qa=()=>["/"],$n=()=>["link-active"],za=()=>["/shopping-cart"],Ka=()=>["/wishlist"],Ha=()=>["/login"],Wa=()=>["/admin/books"],Ga=()=>["/myorders"];function Qa(n,e){if(n&1&&(c(0,"button",7)(1,"mat-icon",8),O(2,"async"),d(3,"favorite"),l()()),n&2){let t=k();h("routerLinkActive",B(5,$n))("routerLink",B(6,Ka)),u(),He("matBadge",te(2,3,t.wishListCount$))}}function Ya(n,e){n&1&&(c(0,"button",16),d(1," Login "),l()),n&2&&h("routerLinkActive",B(2,$n))("routerLink",B(3,Ha))}function Xa(n,e){n&1&&(c(0,"button",17),d(1," Admin Panel "),l()),n&2&&h("routerLink",B(1,Wa))}function Ja(n,e){if(n&1){let t=J();A(0),c(1,"a",18)(2,"mat-icon"),d(3,"account_circle"),l(),c(4,"span"),d(5),l(),c(6,"mat-icon"),d(7,"arrow_drop_down"),l()(),c(8,"mat-menu",null,0)(10,"button",19),d(11,"My Orders"),l(),c(12,"button",20),x("click",function(){z(t);let r=k();return K(r.logout())}),d(13,"Logout"),l()(),P()}if(n&2){let t=V(9),i=k();u(),h("matMenuTriggerFor",t),u(4),ae(" ",i.userData.username,""),u(5),h("routerLink",B(3,Ga))}}var Ro=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.authService=r,this.userService=o,this.subscriptionService=s,this.wishlistService=a,this.userData=new Fe,this.userType=zt,this.cartItemCount$=this.subscriptionService.cartItemcount$,this.wishListCount$=this.subscriptionService.wishlistItemcount$,this.destroyed$=new hi(1),this.userId=localStorage.getItem("userId"),this.wishlistService.getWishlistItems(this.userId).pipe($(this.destroyed$)).subscribe(),this.userService.getCartItemCount(this.userId).pipe($(this.destroyed$)).subscribe(m=>{this.subscriptionService.cartItemcount$.next(m)})}ngOnInit(){this.subscriptionService.userData$.pipe($(this.destroyed$)).subscribe(i=>{this.userData=i})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}logout(){this.authService.logout(),this.router.navigate(["/login"])}};e.\u0275fac=function(r){return new(r||e)(y(he),y(st),y(Kt),y(j),y(at))},e.\u0275cmp=M({type:e,selectors:[["app-nav-bar"]],decls:25,vars:13,consts:[["menu","matMenu"],["color","primary",1,"mat-elevation-z4"],[1,"justify-content-between"],[1,"brand-title"],["mat-flat-button","","color","primary",3,"routerLink"],[1,"d-flex","align-items-center"],["mat-icon-button","",3,"routerLinkActive","routerLink",4,"ngIf"],["mat-icon-button","",3,"routerLinkActive","routerLink"],["matBadgeColor","warn",3,"matBadge"],["mat-flat-button","","color","primary","matTooltip","Login",3,"routerLinkActive","routerLink",4,"ngIf"],["mat-flat-button","","color","primary","matTooltip","Admin panel",3,"routerLink",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","color","primary","href","/swagger/index.html","target","_blank","matTooltip","API details"],["src","https://static1.smartbear.co/swagger/media/assets/swagger_fav.png",1,"swagger-icon"],["mat-flat-button","","color","primary","href","https://github.com/AnkitSharma-007/bookcart","target","_blank","matTooltip","GitHub"],[1,"fa","fa-github"],["mat-flat-button","","color","primary","matTooltip","Login",3,"routerLinkActive","routerLink"],["mat-flat-button","","color","primary","matTooltip","Admin panel",3,"routerLink"],["mat-flat-button","","color","primary",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(r,o){r&1&&(c(0,"mat-toolbar",1)(1,"mat-toolbar-row",2)(2,"div",3)(3,"button",4)(4,"mat-icon"),d(5,"book"),l(),d(6," Book Cart "),l()(),c(7,"div"),v(8,"app-search"),l(),c(9,"div",5),f(10,Qa,4,7,"button",6),c(11,"button",7)(12,"mat-icon",8),O(13,"async"),d(14,"shopping_cart"),l()(),f(15,Ya,2,4,"button",9)(16,Xa,2,2,"button",10)(17,Ja,14,4,"ng-container",11),c(18,"a",12)(19,"span"),v(20,"img",13),l(),d(21," Swagger "),l(),c(22,"a",14),v(23,"i",15),d(24," GitHub "),l()()()()),r&2&&(u(3),h("routerLink",B(10,qa)),u(7),h("ngIf",o.userData.isLoggedIn),u(),h("routerLinkActive",B(11,$n))("routerLink",B(12,za)),u(),He("matBadge",te(13,8,o.cartItemCount$)),u(3),h("ngIf",!o.userData.isLoggedIn),u(),h("ngIf",o.userData.userTypeId==o.userType.admin),u(),h("ngIf",o.userData.isLoggedIn))},dependencies:[U,Br,Lr,$r,G,Si,Vr,jr,Ur,ze,tt,qr,ee,Rr,Do,Se],styles:[".spacer[_ngcontent-%COMP%]{flex-grow:1}a[_ngcontent-%COMP%]{color:#fff}.fa-github[_ngcontent-%COMP%]{font-size:16px}.brand-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18px}mat-toolbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:999}.swagger-icon[_ngcontent-%COMP%]{height:22px;width:22px}"]});let n=e;return n})();var Fo=(()=>{let e=class e{constructor(i){this.authService=i,localStorage.getItem("authToken")||this.authService.setTempUserId(),this.authService.setUserDetails()}};e.\u0275fac=function(r){return new(r||e)(y(st))},e.\u0275cmp=M({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"mat-elevation-z6"],[1,"container"]],template:function(r,o){r&1&&(v(0,"app-nav-bar",0),c(1,"div",1),v(2,"router-outlet"),l())},dependencies:[Dr,Ro]});let n=e;return n})();var lt=(()=>{let e=class e{constructor(i){this.http=i,this.cartItemCount=0,this.baseURL="/api/shoppingcart/"}addBookToCart(i,r){return this.http.post(this.baseURL+`addToCart/${i}/${r}`,{})}getCartItems(i){return this.http.get(this.baseURL+i).pipe(Te(r=>(this.cartItemCount=r.length,r)))}removeCartItems(i,r){return this.http.delete(this.baseURL+`${i}/${r}`,{})}deleteOneCartItem(i,r){return this.http.put(this.baseURL+`${i}/${r}`,{})}clearCart(i){return this.http.delete(this.baseURL+`${i}`,{})}setCart(i,r){return this.http.get(this.baseURL+`setShoppingCart/${i}/${r}`,{}).pipe(Te(o=>(this.cartItemCount=o,o)))}};e.\u0275fac=function(r){return new(r||e)(q(Ae))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ht=(()=>{let e=class e{constructor(i,r,o){this.cartService=i,this.snackBarService=r,this.subscriptionService=o,this.unsubscribe$=new se,this.userId=localStorage.getItem("userId")}addToCart(){this.cartService.addBookToCart(this.userId,this.bookId).pipe($(this.unsubscribe$)).subscribe({next:i=>{this.subscriptionService.cartItemcount$.next(i),this.snackBarService.showSnackBar("One Item added to cart")},error:i=>{console.log("Error ocurred while addToCart data : ",i)}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(lt),y(Oe),y(j))},e.\u0275cmp=M({type:e,selectors:[["app-addtocart"]],inputs:{bookId:"bookId"},decls:4,vars:0,consts:[["mat-raised-button","","color","primary",3,"click"]],template:function(r,o){r&1&&(c(0,"button",0),x("click",function(){return o.addToCart()}),c(1,"mat-icon"),d(2,"shopping_cart"),l(),d(3,` Add to Cart
`),l())},dependencies:[G,ze],styles:["button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px}"]});let n=e;return n})();var el=(n,e)=>({wishlisted:n,"not-wishlisted":e}),tl=(n,e)=>({"favourite-selected":n,"favourite-unselected":e});function il(n,e){if(n&1){let t=J();A(0),c(1,"button",2),x("click",function(){z(t);let r=k();return K(r.toggleValue())}),d(2),l(),P()}if(n&2){let t=k();u(),h("ngClass",tn(2,el,t.toggle,!t.toggle)),u(),ae(" ",t.buttonText," ")}}function nl(n,e){if(n&1){let t=J();c(0,"span",3),x("click",function(){z(t);let r=k();return K(r.toggleValue())}),d(1," favorite "),l()}if(n&2){let t=k();h("ngClass",tn(1,tl,t.toggle,!t.toggle))}}var Wt=(()=>{let e=class e{constructor(i,r,o){this.wishlistService=i,this.subscriptionService=r,this.snackBarService=o,this.showButton=!1,this.unsubscribe$=new se,this.userId=localStorage.getItem("userId")}ngOnChanges(){this.subscriptionService.wishlistItem$.pipe($(this.unsubscribe$)).subscribe(i=>{this.setFavourite(i),this.setButtonText()})}setFavourite(i){i.find(o=>o.bookId===this.bookId)?this.toggle=!0:this.toggle=!1}setButtonText(){this.toggle?this.buttonText="Remove from Wishlist":this.buttonText="Add to Wishlist"}toggleValue(){this.toggle=!this.toggle,this.setButtonText(),this.wishlistService.toggleWishlistItem(this.userId,this.bookId).pipe($(this.unsubscribe$)).subscribe({next:()=>{this.toggle?this.snackBarService.showSnackBar("Item added to your Wishlist"):this.snackBarService.showSnackBar("Item removed from your Wishlist")},error:i=>{console.log("Error ocurred while adding to wishlist : ",i)}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(at),y(j),y(Oe))},e.\u0275cmp=M({type:e,selectors:[["app-addtowishlist"]],inputs:{bookId:"bookId",showButton:"showButton"},features:[or],decls:3,vars:2,consts:[["showIcon",""],[4,"ngIf","ngIfElse"],["mat-raised-button","",3,"click","ngClass"],[1,"material-icons",3,"click","ngClass"]],template:function(r,o){if(r&1&&f(0,il,3,5,"ng-container",1)(1,nl,2,4,"ng-template",null,0,Z),r&2){let s=V(2);h("ngIf",o.showButton)("ngIfElse",s)}},dependencies:[_r,U,G],styles:["[_nghost-%COMP%]{cursor:pointer}.favourite-unselected[_ngcontent-%COMP%]{color:#c2c2c2;animation:_ngcontent-%COMP%_favourite-unselected-beat cubic-bezier(.04,.4,.5,.95) 1.2s forwards 1}.favourite-selected[_ngcontent-%COMP%]{color:#ff4343;animation:_ngcontent-%COMP%_favourite-selected-beat cubic-bezier(.04,.4,.5,.95) 1.2s forwards 1}.wishlisted[_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}.not-wishlisted[_ngcontent-%COMP%]{background-color:#11ae61;color:#fff}@keyframes _ngcontent-%COMP%_favourite-selected-beat{30%{transform:scale(1.4)}50%{transform:scale(.8)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_favourite-unselected-beat{30%{transform:scale(1.4)}50%{transform:scale(.8)}to{transform:scale(1)}}"]});let n=e;return n})();var Lo=n=>["/books/details/",n];function rl(n,e){if(n&1&&(c(0,"div",7),v(1,"app-addtowishlist",6),l()),n&2){let t=k();u(),h("bookId",t.book.bookId)}}var zi=(()=>{let e=class e{constructor(i){this.subscriptionService=i,this.isActive=!1,this.userData$=this.subscriptionService.userData$}};e.\u0275fac=function(r){return new(r||e)(y(j))},e.\u0275cmp=M({type:e,selectors:[["app-book-card"]],inputs:{book:"book"},decls:14,vars:20,consts:[[1,"book-card","mat-elevation-z2",3,"mouseover","mouseout"],["aria-label","Book title",3,"routerLink","matTooltip"],["mat-card-image","","alt","Book cover image",1,"preview-image",3,"src"],["class","favourite mat-elevation-z8",4,"ngIf"],[1,"card-title","my-2"],[3,"routerLink"],[3,"bookId"],[1,"favourite","mat-elevation-z8"]],template:function(r,o){r&1&&(c(0,"mat-card",0),x("mouseover",function(){return o.isActive=!0})("mouseout",function(){return o.isActive=!1}),c(1,"a",1),v(2,"img",2),l(),c(3,"mat-card-content"),f(4,rl,2,1,"div",3),O(5,"async"),c(6,"div",4)(7,"a",5)(8,"strong"),d(9),l()()(),c(10,"p"),d(11),O(12,"currency"),l(),v(13,"app-addtocart",6),l()()),r&2&&(ut("on-book-card-hover",o.isActive),u(),He("matTooltip",o.book.title),h("routerLink",De(16,Lo,o.book.bookId)),u(),Xe("src","/Upload/",o.book.coverFileName,"",Ye),u(2),h("ngIf",te(5,11,o.userData$).isLoggedIn),u(3),h("routerLink",De(18,Lo,o.book.bookId)),u(2),D(o.book.title),u(2),D(ie(12,13,o.book.price,"INR")),u(2),h("bookId",o.book.bookId))},dependencies:[U,Q,Y,Ci,tt,ee,Ht,Wt,Se,be],styles:[".preview-image[_ngcontent-%COMP%]{height:260px;width:200px}.book-card[_ngcontent-%COMP%]{min-width:200px;max-width:200px;max-height:400px}.card-title[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.favourite[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#fff;border:1px solid #ffffff;height:35px;width:35px;border-radius:50%;padding:5px}.on-book-card-hover[_ngcontent-%COMP%]{box-shadow:0 8px 8px 8px #0003,0 8px 8px #00000024,0 8px 8px #0000001f;transform:translateZ(0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow .28s cubic-bezier(.4,0,.2,1)}"]});let n=e;return n})();function ol(n,e){if(n&1&&(c(0,"div",8),v(1,"app-book-card",9),l()),n&2){let t=e.$implicit;u(),h("book",t)}}function sl(n,e){if(n&1&&(A(0),c(1,"div",6),f(2,ol,2,1,"div",7),l(),P()),n&2){let t=e.ngIf;u(2),h("ngForOf",t)}}function al(n,e){n&1&&(c(0,"div",10),v(1,"mat-spinner"),l())}var $o=(()=>{let e=class e{constructor(i,r){this.bookService=i,this.activatedRoute=r,this.queryParams$=this.activatedRoute.paramMap,this.similarBooks$=this.queryParams$.pipe(Qe(o=>{let s=Number(o.get("id"));return this.bookService.getsimilarBooks(s)}))}};e.\u0275fac=function(r){return new(r||e)(y(Pe),y(et))},e.\u0275cmp=M({type:e,selectors:[["app-similarbooks"]],decls:9,vars:4,consts:[["loading",""],[1,"my-4"],[1,"mat-elevation-z2","custom-card-header"],[1,"mat-h1"],[1,"p-3"],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-start","flex-wrap"],["class","p-1",4,"ngFor","ngForOf"],[1,"p-1"],[3,"book"],[1,"d-flex","align-items-center","justify-content-center"]],template:function(r,o){if(r&1&&(c(0,"mat-card",1)(1,"mat-card-header",2)(2,"mat-card-title",3),d(3," Similar Books "),l()(),c(4,"mat-card-content",4),f(5,sl,3,1,"ng-container",5),O(6,"async"),l(),f(7,al,2,0,"ng-template",null,0,Z),l()),r&2){let s=V(8);u(5),h("ngIf",te(6,2,o.similarBooks$))("ngIfElse",s)}},dependencies:[xe,U,Q,Y,re,ne,Ce,zi,Se]});let n=e;return n})();var Qt=function(n){return n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n}(Qt||{}),Yt=function(n){return n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n}(Yt||{});var qn=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(qn||{});var yt=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},Ki=class extends yt{constructor(e,t){super(e),this.response=t}};var cl="https://generativelanguage.googleapis.com",ml="v1",dl="0.2.1",ul="genai-js",Xt=function(n){return n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents",n}(Xt||{}),vt=class{constructor(e,t,i,r){this.model=e,this.task=t,this.apiKey=i,this.stream=r}toString(){let e=`${cl}/${ml}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}};function pl(){return`${ul}/${dl}`}function mi(n,e,t){return de(this,null,function*(){let i;try{if(i=yield fetch(n.toString(),Object.assign(Object.assign({},hl(t)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":pl(),"x-goog-api-key":n.apiKey},body:e})),!i.ok){let r="";try{let o=yield i.json();r=o.error.message,o.error.details&&(r+=` ${JSON.stringify(o.error.details)}`)}catch{}throw new Error(`[${i.status} ${i.statusText}] ${r}`)}}catch(r){let o=new yt(`Error fetching from ${n.toString()}: ${r.message}`);throw o.stack=r.stack,o}return i})}function hl(n){let e={};if(n?.timeout>=0){let t=new AbortController,i=t.signal;setTimeout(()=>t.abort(),n.timeout),e.signal=i}return e}function Hn(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Uo(n.candidates[0]))throw new Ki(`${Hi(n)}`,n);return fl(n)}else if(n.promptFeedback)throw new Ki(`Text not available. ${Hi(n)}`,n);return""},n}function fl(n){var e,t,i,r;return!((r=(i=(t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0?void 0:t.parts)===null||i===void 0?void 0:i[0])===null||r===void 0)&&r.text?n.candidates[0].content.parts[0].text:""}var gl=[qn.RECITATION,qn.SAFETY];function Uo(n){return!!n.finishReason&&gl.includes(n.finishReason)}function Hi(n){var e,t,i;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){let o=n.candidates[0];Uo(o)&&(r+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(r+=`: ${o.finishMessage}`))}return r}function ci(n){return this instanceof ci?(this.v=n,this):new ci(n)}function _l(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(C){i[C]&&(r[C]=function(w){return new Promise(function(b,I){o.push([C,w,b,I])>1||a(C,w)})})}function a(C,w){try{m(i[C](w))}catch(b){g(o[0][3],b)}}function m(C){C.value instanceof ci?Promise.resolve(C.value.v).then(p,_):g(o[0][2],C)}function p(C){a("next",C)}function _(C){a("throw",C)}function g(C,w){C(w),o.shift(),o.length&&a(o[0][0],o[0][1])}}var jo=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function yl(n){let e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=bl(e),[i,r]=t.tee();return{stream:Sl(i),response:vl(r)}}function vl(n){return de(this,null,function*(){let e=[],t=n.getReader();for(;;){let{done:i,value:r}=yield t.read();if(i)return Hn(Cl(e));e.push(r)}})}function Sl(n){return _l(this,arguments,function*(){let t=n.getReader();for(;;){let{value:i,done:r}=yield ci(t.read());if(r)break;yield yield ci(Hn(i))}})}function bl(n){let e=n.getReader();return new ReadableStream({start(i){let r="";return o();function o(){return e.read().then(({value:s,done:a})=>{if(a){if(r.trim()){i.error(new yt("Failed to parse stream"));return}i.close();return}r+=s;let m=r.match(jo),p;for(;m;){try{p=JSON.parse(m[1])}catch{i.error(new yt(`Error parsing JSON response: "${m[1]}"`));return}i.enqueue(p),r=r.substring(m[0].length),m=r.match(jo)}return o()})}}})}function Cl(n){let e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(let i of n)if(i.candidates)for(let r of i.candidates){let o=r.index;if(t.candidates||(t.candidates=[]),t.candidates[o]||(t.candidates[o]={index:r.index}),t.candidates[o].citationMetadata=r.citationMetadata,t.candidates[o].finishReason=r.finishReason,t.candidates[o].finishMessage=r.finishMessage,t.candidates[o].safetyRatings=r.safetyRatings,r.content&&r.content.parts){t.candidates[o].content||(t.candidates[o].content={role:r.content.role||"user",parts:[{text:""}]});for(let s of r.content.parts)s.text&&(t.candidates[o].content.parts[0].text+=s.text)}}return t}function qo(n,e,t,i){return de(this,null,function*(){let r=new vt(e,Xt.STREAM_GENERATE_CONTENT,n,!0),o=yield mi(r,JSON.stringify(t),i);return yl(o)})}function zo(n,e,t,i){return de(this,null,function*(){let r=new vt(e,Xt.GENERATE_CONTENT,n,!1),s=yield(yield mi(r,JSON.stringify(t),i)).json();return{response:Hn(s)}})}function li(n,e){let t=[];if(typeof n=="string")t=[{text:n}];else for(let i of n)typeof i=="string"?t.push({text:i}):t.push(i);return{role:e,parts:t}}function Un(n){return n.contents?n:{contents:[li(n,"user")]}}function El(n){return typeof n=="string"||Array.isArray(n)?{content:li(n,"user")}:n}var Vo="SILENT_ERROR",zn=class{constructor(e,t,i,r){this.model=t,this.params=i,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i?.history&&(this._history=i.history.map(o=>{if(!o.role)throw new Error("Missing role for history item: "+JSON.stringify(o));return li(o.parts,o.role)}))}getHistory(){return de(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(e){return de(this,null,function*(){var t,i;yield this._sendPromise;let r=li(e,"user"),o={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,contents:[...this._history,r]},s;return this._sendPromise=this._sendPromise.then(()=>zo(this._apiKey,this.model,o,this.requestOptions)).then(a=>{var m;if(a.response.candidates&&a.response.candidates.length>0){this._history.push(r);let p=Object.assign({parts:[],role:"model"},(m=a.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(p)}else{let p=Hi(a.response);p&&console.warn(`sendMessage() was unsuccessful. ${p}. Inspect response object for details.`)}s=a}),yield this._sendPromise,s})}sendMessageStream(e){return de(this,null,function*(){var t,i;yield this._sendPromise;let r=li(e,"user"),o={safetySettings:(t=this.params)===null||t===void 0?void 0:t.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,contents:[...this._history,r]},s=qo(this._apiKey,this.model,o,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>s).catch(a=>{throw new Error(Vo)}).then(a=>a.response).then(a=>{if(a.candidates&&a.candidates.length>0){this._history.push(r);let m=Object.assign({},a.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{let m=Hi(a);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(a=>{a.message!==Vo&&console.error(a)}),s})}};function wl(n,e,t,i){return de(this,null,function*(){let r=new vt(e,Xt.COUNT_TOKENS,n,!1);return(yield mi(r,JSON.stringify(Object.assign(Object.assign({},t),{model:e})),i)).json()})}function Tl(n,e,t,i){return de(this,null,function*(){let r=new vt(e,Xt.EMBED_CONTENT,n,!1);return(yield mi(r,JSON.stringify(t),i)).json()})}function Il(n,e,t,i){return de(this,null,function*(){let r=new vt(e,Xt.BATCH_EMBED_CONTENTS,n,!1),o=t.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(yield mi(r,JSON.stringify({requests:o}),i)).json()})}var Kn=class{constructor(e,t,i){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.requestOptions=i||{}}generateContent(e){return de(this,null,function*(){let t=Un(e);return zo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)})}generateContentStream(e){return de(this,null,function*(){let t=Un(e);return qo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)})}startChat(e){return new zn(this.apiKey,this.model,e,this.requestOptions)}countTokens(e){return de(this,null,function*(){let t=Un(e);return wl(this.apiKey,this.model,t)})}embedContent(e){return de(this,null,function*(){let t=El(e);return Tl(this.apiKey,this.model,t)})}batchEmbedContents(e){return de(this,null,function*(){return Il(this.apiKey,this.model,e,this.requestOptions)})}};var Wi=class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new yt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Kn(this.apiKey,e,t)}};function kl(n,e){n&1&&(A(0),c(1,"div",7),v(2,"mat-spinner",8),l(),P())}function Ml(n,e){if(n&1&&(c(0,"p",1),d(1),l()),n&2){let t=k(2);u(),D(t.bookSummary)}}function xl(n,e){if(n&1&&f(0,Ml,2,1,"p",9),n&2){let t=k();h("ngIf",t.bookSummary.length>0)}}var Ko=(()=>{let e=class e{constructor(){this.geminiInput="",this.bookSummary="",this.showLoader=!1,this.MODEL_NAME="gemini-1.0-pro",this.API_KEY="AIzaSyB88VzQVRWpEl5UKPUvzVZ8dIlYR-FV8gg",this.generationConfig={temperature:.9,topK:1,topP:1,maxOutputTokens:2048},this.safetySettings=[{category:Qt.HARM_CATEGORY_HARASSMENT,threshold:Yt.BLOCK_MEDIUM_AND_ABOVE},{category:Qt.HARM_CATEGORY_HATE_SPEECH,threshold:Yt.BLOCK_MEDIUM_AND_ABOVE},{category:Qt.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Yt.BLOCK_MEDIUM_AND_ABOVE},{category:Qt.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Yt.BLOCK_MEDIUM_AND_ABOVE}]}set bookTitle(i){this.geminiInput=`Give me a summary of the book "${i}" in 300 words`,this.bookSummary=""}fetchSummaryFromGemini(){return de(this,null,function*(){let r=new Wi(this.API_KEY).getGenerativeModel({model:this.MODEL_NAME,generationConfig:this.generationConfig,safetySettings:this.safetySettings});try{this.showLoader=!0;let o=[{text:this.geminiInput}],s=yield r.generateContent({contents:[{role:"user",parts:o}],generationConfig:this.generationConfig,safetySettings:this.safetySettings});this.bookSummary=s.response.text(),this.showLoader=!1}catch(o){console.log("An error Occurred: ",o)}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=M({type:e,selectors:[["app-book-summary"]],inputs:{bookTitle:"bookTitle"},decls:10,vars:2,consts:[["showSummary",""],[1,"mt-4"],[1,"row","g-0","d-flex","p-3"],[1,"col-md-5","col-sm-12"],["color","primary","mat-raised-button","",1,"btn-gemini",3,"click"],["src","https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg",1,"gemini-icon"],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-center","mt-4"],["diameter","50"],["class","mt-4",4,"ngIf"]],template:function(r,o){if(r&1){let s=J();c(0,"mat-card",1)(1,"mat-card-content",2)(2,"div",3)(3,"button",4),x("click",function(){return z(s),K(o.fetchSummaryFromGemini())}),c(4,"span"),v(5,"img",5),l(),d(6," Generate book plot summary using Google Gemini "),l()(),f(7,kl,3,0,"ng-container",6)(8,xl,1,1,"ng-template",null,0,Z),l()()}if(r&2){let s=V(9);u(7),h("ngIf",o.showLoader)("ngIfElse",s)}},dependencies:[U,G,Q,Y,Ce],styles:[".gemini-icon[_ngcontent-%COMP%]{height:20px;width:20px}.btn-gemini[_ngcontent-%COMP%]{background-color:#36393e}"]});let n=e;return n})();var Pl=()=>["/"];function Ol(n,e){if(n&1&&v(0,"app-addtowishlist",13),n&2){let t=k().ngIf;h("bookId",t.bookId)("showButton",!0)}}function Nl(n,e){if(n&1&&(A(0),c(1,"mat-card",2)(2,"mat-card-header",3)(3,"mat-card-title",4),d(4,"Book Details"),l()(),c(5,"mat-card-content",5)(6,"div",6),v(7,"img",7),l(),c(8,"div",8)(9,"table",9)(10,"tbody")(11,"tr")(12,"td")(13,"strong"),d(14,"Title"),l()(),c(15,"td"),d(16),l()(),c(17,"tr")(18,"td")(19,"strong"),d(20,"Author"),l()(),c(21,"td"),d(22),l()(),c(23,"tr")(24,"td")(25,"strong"),d(26,"Category"),l()(),c(27,"td"),d(28),l()(),c(29,"tr")(30,"td")(31,"strong"),d(32,"Price"),l()(),c(33,"td"),d(34),O(35,"currency"),l()()()(),c(36,"div"),v(37,"app-addtocart",10),f(38,Ol,1,2,"app-addtowishlist",11),O(39,"async"),l()()()(),v(40,"app-book-summary",12)(41,"app-similarbooks"),P()),n&2){let t=e.ngIf,i=k();u(7),Xe("src","/Upload/",t.coverFileName,"",Ye),u(9),D(t.title),u(6),D(t.author),u(6),D(t.category),u(6),D(ie(35,9,t.price,"INR")),u(3),h("bookId",t.bookId),u(),h("ngIf",te(39,12,i.userData$).isLoggedIn),u(2),h("bookTitle",t.title)}}function Dl(n,e){n&1&&(c(0,"div",14)(1,"div")(2,"h1",15),d(3,"No books found."),l()(),c(4,"div")(5,"button",16),d(6," Back to Home "),l()()()),n&2&&(u(5),h("routerLink",B(1,Pl)))}var Ho=(()=>{let e=class e{constructor(i,r,o){this.activatedRoute=i,this.bookService=r,this.subscriptionService=o,this.userData$=this.subscriptionService.userData$.asObservable(),this.queryParams$=this.activatedRoute.paramMap,this.book$=this.bookService.books$,this.bookDetails$=this.queryParams$.pipe(nr(this.book$),Te(([s,a])=>{let m=Number(s.get("id"));return a.find(p=>p.bookId===m)}))}};e.\u0275fac=function(r){return new(r||e)(y(et),y(Pe),y(j))},e.\u0275cmp=M({type:e,selectors:[["app-book-details"]],decls:4,vars:4,consts:[["noBooksFound",""],[4,"ngIf","ngIfElse"],[1,"mt-4"],[1,"mat-elevation-z2","custom-card-header"],[1,"mat-h1"],[1,"row","g-0","d-flex","p-3"],[1,"col-md-3","col-sm-12"],["mat-card-image","","alt","No image available",3,"src"],[1,"col-md-5","col-sm-12","d-flex","flex-column","justify-content-between"],[1,"table","table-lg"],[3,"bookId"],["class","ms-2",3,"bookId","showButton",4,"ngIf"],[3,"bookTitle"],[1,"ms-2",3,"bookId","showButton"],[1,"d-flex","flex-column","align-items-center","mt-4"],[1,"display-4"],["mat-raised-button","","color","primary",3,"routerLink"]],template:function(r,o){if(r&1&&(f(0,Nl,42,14,"ng-container",1),O(1,"async"),f(2,Dl,7,2,"ng-template",null,0,Z)),r&2){let s=V(3);h("ngIf",te(1,2,o.bookDetails$))("ngIfElse",s)}},dependencies:[U,G,Q,Y,re,Ci,ne,ee,Ht,$o,Wt,Ko,Se,be],styles:["img[_ngcontent-%COMP%]{height:350px;width:250px;transition:transform .5s}img[_ngcontent-%COMP%]:hover{transform:scale(1.5)}td[_ngcontent-%COMP%]{border-top:0;border-bottom:1px solid #dee2e6;width:30%;padding:20px}td[_ngcontent-%COMP%]:nth-child(2){width:70%}"]});let n=e;return n})();var Rl=n=>({category:n});function Fl(n,e){if(n&1&&(c(0,"mat-list-item",3),O(1,"lowercase"),O(2,"lowercase"),c(3,"a"),d(4),l(),v(5,"mat-divider"),l()),n&2){let t=e.$implicit,i=k();ut("active-category",i.category==te(1,4,t.categoryName)),h("queryParams",De(8,Rl,te(2,6,t.categoryName))),u(4),D(t.categoryName)}}var Wo=(()=>{let e=class e{constructor(i){this.bookService=i,this.categories$=this.bookService.categories$.pipe(fi(r=>(console.log("Error ocurred while fetching category List : ",r),tr)))}};e.\u0275fac=function(r){return new(r||e)(y(Pe))},e.\u0275cmp=M({type:e,selectors:[["app-book-filter"]],inputs:{category:"category"},decls:6,vars:5,consts:[[1,"p-1","mat-elevation-z4"],["routerLink","/"],["routerLink","/filter",3,"active-category","queryParams",4,"ngFor","ngForOf"],["routerLink","/filter",3,"queryParams"]],template:function(r,o){r&1&&(c(0,"mat-nav-list",0)(1,"mat-list-item",1)(2,"a"),d(3,"All Categories"),l()(),f(4,Fl,6,10,"mat-list-item",2),O(5,"async"),l()),r&2&&(u(),ut("active-category",!o.category),u(3),h("ngForOf",te(5,3,o.categories$)))},dependencies:[xe,Wr,Qr,Gr,ee,Se,yr],styles:[".active-category[_ngcontent-%COMP%]{background-color:#fb641b!important}"]});let n=e;return n})();var Gi=class{constructor(){this.orderDetails=[]}};var Go=(()=>{let e=class e{constructor(i){this.http=i,this.baseURL="/api/CheckOut/"}placeOrder(i,r){return this.http.post(this.baseURL+`${i}`,r)}};e.\u0275fac=function(r){return new(r||e)(q(Ae))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var $l=()=>["/shopping-cart"],jl=()=>["/"];function Vl(n,e){n&1&&(c(0,"mat-error"),d(1,"Name is required"),l())}function Ul(n,e){n&1&&(c(0,"mat-error"),d(1,"Address is required "),l())}function ql(n,e){n&1&&(c(0,"mat-error"),d(1,"Address is required "),l())}function zl(n,e){n&1&&(c(0,"mat-error"),d(1,"Pincode is required "),l())}function Kl(n,e){n&1&&(c(0,"mat-error"),d(1," Pincode must have 6 digits only and cannot start with 0 "),l())}function Hl(n,e){n&1&&(c(0,"mat-error"),d(1,"State is required"),l())}function Wl(n,e){n&1&&(A(0),c(1,"div",20),v(2,"mat-spinner"),l(),P())}function Gl(n,e){if(n&1&&(c(0,"tr")(1,"td"),d(2),l(),c(3,"td"),d(4),l(),c(5,"td"),d(6),O(7,"currency"),l(),c(8,"td"),d(9),O(10,"currency"),l()()),n&2){let t=e.$implicit;u(2),ae(" ",t.book.title," "),u(2),D(t.quantity),u(2),D(ie(7,4,t.book.price,"INR")),u(3),ae(" ",ie(10,7,t.book.price*t.quantity,"INR")," ")}}function Ql(n,e){if(n&1&&(A(0),c(1,"mat-card-title"),d(2," Order Summary "),l(),c(3,"table",21)(4,"thead")(5,"tr")(6,"th"),d(7,"Title"),l(),c(8,"th"),d(9,"Quantity"),l(),c(10,"th"),d(11,"Price"),l(),c(12,"th"),d(13,"Total"),l()()(),c(14,"tbody"),f(15,Gl,11,10,"tr",22),l(),c(16,"tfoot",21)(17,"tr"),v(18,"td")(19,"td"),c(20,"th"),d(21,"Grand Total"),l(),c(22,"th"),d(23),O(24,"currency"),l()()()(),P()),n&2){let t=k(2);u(15),h("ngForOf",t.checkOutItems.orderDetails),u(8),D(ie(24,2,t.totalPrice,"INR"))}}function Yl(n,e){n&1&&(c(0,"mat-card-header",20)(1,"mat-card-title"),d(2," There are no items in your cart. "),l()(),c(3,"mat-card-content",20)(4,"button",23),d(5," Start shopping "),l()()),n&2&&(u(4),h("routerLink",B(1,jl)))}function Xl(n,e){if(n&1&&f(0,Ql,25,5,"ng-container",19)(1,Yl,6,2,"ng-template",null,1,Z),n&2){let t=V(2),i=k();h("ngIf",i.checkOutItems.orderDetails.length>0)("ngIfElse",t)}}var Qo=(()=>{let e=class e{constructor(i,r,o,s,a,m){this.fb=i,this.router=r,this.cartService=o,this.checkOutService=s,this.snackBarService=a,this.subscriptionService=m,this.checkOutItems=new Gi,this.showLoader=!1,this.unsubscribe$=new se,this.checkOutForm=this.fb.group({name:["",le.required],addressLine1:["",le.required],addressLine2:["",le.required],pincode:["",le.compose([le.required,le.pattern("^[1-9][0-9]{5}$")])],state:["",[le.required]]}),this.userId=localStorage.getItem("userId")}get checkoutFormControl(){return this.checkOutForm.controls}ngOnInit(){this.getCheckOutItems()}getCheckOutItems(){this.showLoader=!0,this.cartService.getCartItems(this.userId).pipe($(this.unsubscribe$)).subscribe({next:i=>{i.length>0?(this.checkOutItems.orderDetails=i,this.getTotalPrice()):this.checkOutForm.disable(),this.showLoader=!1},error:i=>{console.log("Error ocurred while fetching shopping cart item : ",i),this.showLoader=!1}})}getTotalPrice(){this.totalPrice=0,this.checkOutItems.orderDetails.map(i=>{this.totalPrice+=i.book.price*i.quantity}),this.checkOutItems.cartTotal=this.totalPrice}placeOrder(){this.checkOutForm.valid&&this.checkOutService.placeOrder(this.userId,this.checkOutItems).pipe($(this.unsubscribe$)).subscribe({next:i=>{this.subscriptionService.cartItemcount$.next(i),this.router.navigate(["/myorders"]),this.snackBarService.showSnackBar("Order placed successfully!!!")},error:i=>{console.log("Error ocurred while placing order : ",i)}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(vi),y(he),y(lt),y(Go),y(Oe),y(j))},e.\u0275cmp=M({type:e,selectors:[["app-checkout"]],decls:47,vars:12,consts:[["cartItems",""],["noData",""],[1,"my-4"],[1,"custom-card-header","mat-elevation-z2"],[1,"mat-h1"],[1,"p-2"],[1,"row"],[1,"col-md-6"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Address Line 1","formControlName","addressLine1","required",""],["matInput","","placeholder","Address Line 2","formControlName","addressLine2","required",""],["matInput","","placeholder","Pincode","formControlName","pincode","required",""],["matInput","","placeholder","State","formControlName","state","required",""],["align","end",1,"p-0"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","color","warn",1,"ms-2",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-center"],[1,"table"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"mt-2",3,"routerLink"]],template:function(r,o){if(r&1){let s=J();c(0,"mat-card",2)(1,"mat-card-header",3)(2,"mat-card-title",4),d(3,"Check Out "),l()(),c(4,"mat-card-content",5)(5,"div",6)(6,"div",7)(7,"mat-card-content")(8,"mat-card-title"),d(9," Shipping address "),l(),c(10,"form",8),x("ngSubmit",function(){return z(s),K(o.placeOrder())}),c(11,"mat-form-field",9)(12,"mat-label"),d(13,"Name"),l(),v(14,"input",10),f(15,Vl,2,0,"mat-error",11),l(),c(16,"mat-form-field",9)(17,"mat-label"),d(18,"Address Line 1"),l(),v(19,"input",12),f(20,Ul,2,0,"mat-error",11),l(),c(21,"mat-form-field",9)(22,"mat-label"),d(23,"Address Line 2"),l(),v(24,"input",13),f(25,ql,2,0,"mat-error",11),l(),c(26,"mat-form-field",9)(27,"mat-label"),d(28,"Pincode"),l(),v(29,"input",14),f(30,zl,2,0,"mat-error",11)(31,Kl,2,0,"mat-error",11),l(),c(32,"mat-form-field",9)(33,"mat-label"),d(34,"State"),l(),v(35,"input",15),f(36,Hl,2,0,"mat-error",11),l(),c(37,"mat-card-actions",16)(38,"button",17),d(39," Place Order "),l(),c(40,"button",18),d(41," Cancel "),l()()()()(),c(42,"div",7),f(43,Wl,3,0,"ng-container",19),c(44,"mat-card-content"),f(45,Xl,3,2,"ng-template",null,0,Z),l()()()()()}if(r&2){let s=V(46);u(10),h("formGroup",o.checkOutForm),u(5),h("ngIf",o.checkoutFormControl.name.touched&&o.checkoutFormControl.name.invalid),u(5),h("ngIf",o.checkoutFormControl.addressLine1.touched&&o.checkoutFormControl.addressLine1.invalid),u(5),h("ngIf",o.checkoutFormControl.addressLine2.touched&&o.checkoutFormControl.addressLine2.invalid),u(5),h("ngIf",o.checkoutFormControl.pincode.touched&&o.checkoutFormControl.pincode.hasError("required")),u(),h("ngIf",o.checkoutFormControl.pincode.touched&&o.checkoutFormControl.pincode.hasError("pattern")),u(5),h("ngIf",o.checkoutFormControl.state.touched&&o.checkoutFormControl.state.invalid),u(2),h("disabled",o.checkOutForm.disabled),u(2),h("routerLink",B(11,$l)),u(3),h("ngIf",o.showLoader)("ngIfElse",s)}},dependencies:[xe,U,G,Q,At,Y,re,ne,rt,nt,it,xt,Ce,Ze,Ue,qe,Je,Mt,It,kt,ee,be],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-top:0;border-bottom:1px solid #dee2e6;width:20%;padding:20px}th[_ngcontent-%COMP%]:nth-child(1), td[_ngcontent-%COMP%]:nth-child(1){width:40%}"]});let n=e;return n})();var Jl=()=>["/register"];function Zl(n,e){n&1&&(c(0,"mat-card-header")(1,"mat-card-subtitle")(2,"mat-error"),d(3,"Username or Password is incorrect."),l()()())}function ec(n,e){n&1&&(c(0,"mat-error"),d(1,"Username is required"),l())}function tc(n,e){n&1&&(c(0,"mat-error"),d(1,"Password is required"),l())}var Yo=(()=>{let e=class e{constructor(i,r,o,s,a,m){this.route=i,this.router=r,this.cartService=o,this.authenticationService=s,this.subscriptionService=a,this.wishlistService=m,this.showPassword=!0,this.unsubscribe$=new se,this.loginForm=new Mr({username:new Jt("",le.required),password:new Jt("",le.required)})}get loginFormControl(){return this.loginForm.controls}ngOnInit(){this.subscriptionService.userData$.asObservable().pipe($(this.unsubscribe$)).subscribe(i=>{this.userId=i.userId})}login(){this.loginForm.valid&&this.authenticationService.login(this.loginForm.value).pipe(Qe(()=>this.cartService.setCart(this.authenticationService.oldUserId,this.userId)),Qe(i=>(this.subscriptionService.cartItemcount$.next(i),this.wishlistService.getWishlistItems(this.userId))),Qe(()=>this.route.queryParams),$(this.unsubscribe$)).subscribe({next:i=>{let r=i.returnUrl||"/";this.router.navigate([r])},error:i=>{console.error("Error occurred while login : ",i),this.loginForm.reset(),this.loginForm.setErrors({invalidLogin:!0})}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(et),y(he),y(lt),y(st),y(j),y(at))},e.\u0275cmp=M({type:e,selectors:[["app-login"]],decls:28,vars:8,consts:[[1,"d-flex","justify-content-center"],[1,"my-4","w-50"],[1,"mat-elevation-z2","custom-card-header","justify-content-between"],[1,"mat-h1"],[1,"mat-h4"],["mat-raised-button","",3,"routerLink"],[4,"ngIf"],[1,"p-3"],["novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100","mt-1"],["matInput","","placeholder","Username","formControlName","username","required",""],["matInput","","placeholder","Password","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["align","end",1,"p-0"],["mat-raised-button","","color","primary"]],template:function(r,o){r&1&&(c(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title",3),d(4," Login "),l(),c(5,"div")(6,"span",4),d(7,"New User? "),l(),c(8,"button",5),d(9,"Register"),l()()(),f(10,Zl,4,0,"mat-card-header",6),c(11,"mat-card-content",7)(12,"form",8),x("ngSubmit",function(){return o.login()}),c(13,"mat-form-field",9)(14,"mat-label"),d(15,"Username"),l(),v(16,"input",10),f(17,ec,2,0,"mat-error",6),l(),c(18,"mat-form-field",9)(19,"mat-label"),d(20,"Password"),l(),v(21,"input",11),c(22,"mat-icon",12),x("click",function(){return o.showPassword=!o.showPassword}),d(23),l(),f(24,tc,2,0,"mat-error",6),l(),c(25,"mat-card-actions",13)(26,"button",14),d(27,"Login"),l()()()()()()),r&2&&(u(8),h("routerLink",B(7,Jl)),u(2),h("ngIf",o.loginForm.errors),u(2),h("formGroup",o.loginForm),u(5),h("ngIf",o.loginFormControl.username.touched&&(o.loginFormControl.username.errors==null?null:o.loginFormControl.username.errors.required)),u(4),h("type",o.showPassword?"password":"text"),u(2),D(o.showPassword?"visibility_off":"visibility"),u(),h("ngIf",o.loginFormControl.password.touched&&(o.loginFormControl.password.errors==null?null:o.loginFormControl.password.errors.required)))},dependencies:[U,G,Q,At,Y,re,Hr,ne,rt,nt,it,xt,bi,ze,Ze,Ue,qe,Je,Mt,It,kt,ee]});let n=e;return n})();var Xo=(()=>{let e=class e{constructor(i){this.http=i,this.baseURL="/api/Order/"}myOrderDetails(i){return this.http.get(this.baseURL+i)}};e.\u0275fac=function(r){return new(r||e)(q(Ae))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var nc=()=>["expandedDetail"],rc=()=>[5,10,25,50],oc=n=>["/books/details/",n],sc=()=>["/"];function ac(n,e){n&1&&(c(0,"th",21),d(1,"Order Id"),l())}function lc(n,e){if(n&1&&(c(0,"td",22),d(1),l()),n&2){let t=e.$implicit;u(),D(t.orderId)}}function cc(n,e){n&1&&(c(0,"th",21),d(1,"Ordered On"),l())}function mc(n,e){if(n&1&&(c(0,"td",22),d(1),O(2,"date"),l()),n&2){let t=e.$implicit;u(),D(te(2,1,t.orderDate))}}function dc(n,e){n&1&&(c(0,"th",21),d(1,"Order Total"),l())}function uc(n,e){if(n&1&&(c(0,"td",22),d(1),O(2,"currency"),l()),n&2){let t=e.$implicit;u(),ae(" ",ie(2,1,t.cartTotal,"INR")," ")}}function pc(n,e){if(n&1&&(c(0,"tr")(1,"td")(2,"a",27),d(3),l()(),c(4,"td"),d(5),l(),c(6,"td"),d(7),O(8,"currency"),l()()),n&2){let t=e.$implicit;u(2),h("routerLink",De(7,oc,t.book.bookId)),u(),D(t.book.title),u(2),D(t.quantity),u(2),ae(" ",ie(8,4,t.book.price*t.quantity,"INR")," ")}}function hc(n,e){if(n&1&&(c(0,"td",22)(1,"div",23)(2,"mat-card",24)(3,"mat-card-content")(4,"table",25)(5,"thead")(6,"tr")(7,"th"),d(8,"Title"),l(),c(9,"th"),d(10,"Quantity"),l(),c(11,"th"),d(12,"Amount Paid"),l()()(),c(13,"tbody"),f(14,pc,9,9,"tr",26),l()()()()()()),n&2){let t=e.$implicit,i=k(2);cr("colspan",i.displayedColumns.length),u(),h("@detailExpand",t==i.expandedElement?"expanded":"collapsed"),u(13),h("ngForOf",t.orderDetails)}}function fc(n,e){n&1&&v(0,"tr",28)}function gc(n,e){if(n&1){let t=J();c(0,"tr",29),x("click",function(){let r=z(t).$implicit,o=k(2);return K(o.expandedElement=o.expandedElement===r?null:r)}),l()}if(n&2){let t=e.$implicit,i=k(2);ut("example-expanded-row",i.expandedElement===t)}}function _c(n,e){n&1&&v(0,"tr",30)}function yc(n,e){n&1&&(c(0,"tr",31)(1,"td",32),d(2,"No data matching the filter"),l()())}function vc(n,e){if(n&1){let t=J();c(0,"div")(1,"mat-card-content")(2,"mat-form-field",6)(3,"mat-label"),d(4,"Search"),l(),c(5,"input",7),x("keyup",function(r){z(t);let o=k();return K(o.applyFilter(r))}),l()(),c(6,"div",8)(7,"table",9),A(8,10),f(9,ac,2,0,"th",11)(10,lc,2,1,"td",12),P(),A(11,13),f(12,cc,2,0,"th",11)(13,mc,3,3,"td",12),P(),A(14,14),f(15,dc,2,0,"th",11)(16,uc,3,4,"td",12),P(),A(17,15),f(18,hc,15,3,"td",12),P(),f(19,fc,1,0,"tr",16)(20,gc,1,2,"tr",17)(21,_c,1,0,"tr",18)(22,yc,3,0,"tr",19),l(),v(23,"mat-paginator",20),l()()()}if(n&2){let t=k();u(7),h("dataSource",t.dataSource),u(12),h("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),u(),h("matRowDefColumns",t.displayedColumns),u(),h("matRowDefColumns",B(6,nc)),u(2),h("pageSizeOptions",B(7,rc))}}function Sc(n,e){n&1&&(c(0,"div",34),v(1,"mat-spinner"),l())}function bc(n,e){n&1&&(c(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),d(3," Looks like you have not placed any orders !!! "),l()(),c(4,"mat-card-content")(5,"button",36),d(6," Start shopping "),l()()()),n&2&&(u(5),h("routerLink",B(1,sc)))}function Cc(n,e){if(n&1&&f(0,bc,7,2,"mat-card",35),n&2){let t=k(2);h("ngIf",!t.isLoading)}}function Ec(n,e){if(n&1&&f(0,Sc,2,0,"div",33)(1,Cc,1,1,"ng-template",null,1,Z),n&2){let t=V(2),i=k();h("ngIf",i.isLoading)("ngIfElse",t)}}var Zo=(()=>{let e=class e{set matPaginator(i){this.dataSource.paginator=i}constructor(i){this.orderService=i,this.displayedColumns=["orderId","orderedOn","orderTotal"],this.dataSource=new Xr,this.unsubscribe$=new se,this.userId=localStorage.getItem("userId")}ngOnInit(){this.isLoading=!0,this.getMyOrderDetails()}getMyOrderDetails(){this.orderService.myOrderDetails(this.userId).pipe($(this.unsubscribe$)).subscribe({next:i=>{i!=null&&(this.dataSource.data=Object.values(i),this.isLoading=!1)},error:i=>{console.log("Error ocurred while fetching my order details : ",i)}})}applyFilter(i){let r=i.target.value;this.dataSource.filter=r.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(Xo))},e.\u0275cmp=M({type:e,selectors:[["app-my-orders"]],viewQuery:function(r,o){if(r&1&&mr(Ei,5),r&2){let s;dr(s=ur())&&(o.matPaginator=s.first)}},decls:7,vars:2,consts:[["noDataFound",""],["noData",""],[1,"my-4"],[1,"custom-card-header","mat-elevation-z2"],[1,"mat-h1"],[4,"ngIf","ngIfElse"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Search",3,"keyup"],["table-container","",1,"mat-elevation-z2"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","orderId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","orderedOn"],["matColumnDef","orderTotal"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"example-element-detail"],[1,"w-100"],[1,"table","mat-elevation-z2","details-table"],[4,"ngFor","ngForOf"],[3,"routerLink"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"],["class","d-flex align-items-center justify-content-center",4,"ngIf","ngIfElse"],[1,"d-flex","align-items-center","justify-content-center"],[4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-2",3,"routerLink"]],template:function(r,o){if(r&1&&(c(0,"mat-card",2)(1,"mat-card-header",3)(2,"mat-card-title",4),d(3,"My Orders "),l()(),f(4,vc,24,8,"div",5)(5,Ec,3,2,"ng-template",null,0,Z),l()),r&2){let s=V(6);u(4),h("ngIf",o.dataSource&&o.dataSource.data.length)("ngIfElse",s)}},dependencies:[xe,U,G,Q,Y,re,ne,rt,nt,it,Pt,Nt,Lt,Dt,Ot,Bt,Rt,Ft,$t,jt,Yr,Ce,Ei,ee,be,vr],styles:["table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:18%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#e2e1e2;cursor:pointer}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:0;border-bottom:1px solid #dee2e6;width:20%;padding:20px}.details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:40%}"],data:{animation:[wr("detailExpand",[nn("collapsed, void",wt({height:"0px",minHeight:"0",display:"none"})),nn("expanded",wt({height:"*"})),kr("* <=> *",Tr("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}});let n=e;return n})();var es=(()=>{let e=class e{constructor(i){this.userService=i}patternValidator(){return i=>i.value?new RegExp("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$").test(i.value)?null:{passwordValidation:!0}:null}confirmPasswordValidator(i){let r=i.get("password").value,o=i.get("confirmPassword").value;r!==o&&i.get("confirmPassword").setErrors({passwordMismatch:!0})}userNameValidator(i){return clearTimeout(this.debouncer),new Promise(r=>{this.debouncer=setTimeout(()=>{this.userService.validateUserName(i.value).subscribe(o=>{r(o?null:{userNameNotAvailable:!0})})},1e3)})}};e.\u0275fac=function(r){return new(r||e)(q(Kt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Tc=()=>["/login"];function Ic(n,e){n&1&&(c(0,"mat-error"),d(1,"First Name is required"),l())}function kc(n,e){n&1&&(c(0,"mat-error"),d(1,"Last Name is required"),l())}function Mc(n,e){n&1&&(c(0,"mat-error"),d(1,"User Name is required "),l())}function xc(n,e){n&1&&(c(0,"mat-error"),d(1,"User Name is not available"),l())}function Ac(n,e){n&1&&(c(0,"mat-error"),d(1,"Password is required "),l())}function Pc(n,e){n&1&&(c(0,"mat-error"),d(1," Password should have minimum 8 characters, at least 1 uppercase letter, 1 lowercase letter and 1 number "),l())}function Oc(n,e){n&1&&(c(0,"mat-error"),d(1,"Password is required "),l())}function Nc(n,e){n&1&&(c(0,"mat-error"),d(1," Password do not match "),l())}function Dc(n,e){n&1&&(c(0,"mat-error"),d(1,"Gender is required"),l())}var ts=(()=>{let e=class e{constructor(i,r,o,s,a){this.userService=i,this.router=r,this.fb=o,this.snackBarService=s,this.customValidation=a,this.showPassword=!0,this.showConfirmPassword=!0,this.unsubscribe$=new se,this.registrationForm=this.fb.group({firstname:["",le.required],lastname:["",le.required],username:["",[le.required],this.customValidation.userNameValidator.bind(this.customValidation)],password:["",le.compose([le.required,this.customValidation.patternValidator()])],confirmPassword:["",[le.required]],gender:["",le.required]},{validator:this.customValidation.confirmPasswordValidator})}get registrationFormControl(){return this.registrationForm.controls}registerUser(){this.registrationForm.valid&&this.userService.registerUser(this.registrationForm.value).pipe($(this.unsubscribe$)).subscribe({next:()=>{this.router.navigate(["/login"])},error:i=>{this.snackBarService.showSnackBar("Error occurred!! Try again"),console.log("Error ocurred while adding book data : ",i)}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(Kt),y(he),y(vi),y(Oe),y(es))},e.\u0275cmp=M({type:e,selectors:[["app-user-registration"]],decls:55,vars:16,consts:[[1,"d-flex","justify-content-center"],[1,"my-4","w-50"],[1,"custom-card-header","justify-content-between","mat-elevation-z2"],[1,"mat-h1"],[1,"mat-h4"],["mat-raised-button","",3,"routerLink"],[1,"p-3"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","placeholder","First name","formControlName","firstname","required",""],[4,"ngIf"],["matInput","","placeholder","Last Name","formControlName","lastname","required",""],["matInput","","placeholder","User name","formControlName","username","required",""],["matInput","","placeholder","Password","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["matInput","","placeholder","Confirm Password","formControlName","confirmPassword","required","",3,"type"],["formControlName","gender"],["value","Male"],["value","Female"],["align","end",1,"p-0"],["mat-raised-button","","color","primary"]],template:function(r,o){r&1&&(c(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title",3),d(4," User Registration "),l(),c(5,"div")(6,"span",4),d(7,"Already Registered? "),l(),c(8,"button",5),d(9,"Login"),l()()(),c(10,"mat-card-content",6)(11,"form",7),x("ngSubmit",function(){return o.registerUser()}),c(12,"mat-form-field",8)(13,"mat-label"),d(14,"First name"),l(),v(15,"input",9),f(16,Ic,2,0,"mat-error",10),l(),c(17,"mat-form-field",8)(18,"mat-label"),d(19,"Last name"),l(),v(20,"input",11),f(21,kc,2,0,"mat-error",10),l(),c(22,"mat-form-field",8)(23,"mat-label"),d(24,"User name"),l(),v(25,"input",12),f(26,Mc,2,0,"mat-error",10)(27,xc,2,0,"mat-error",10),l(),c(28,"mat-form-field",8)(29,"mat-label"),d(30,"Password"),l(),v(31,"input",13),c(32,"mat-icon",14),x("click",function(){return o.showPassword=!o.showPassword}),d(33),l(),f(34,Ac,2,0,"mat-error",10)(35,Pc,2,0,"mat-error",10),l(),c(36,"mat-form-field",8)(37,"mat-label"),d(38,"Confirm Password"),l(),v(39,"input",15),c(40,"mat-icon",14),x("click",function(){return o.showConfirmPassword=!o.showConfirmPassword}),d(41),l(),f(42,Oc,2,0,"mat-error",10)(43,Nc,2,0,"mat-error",10),l(),c(44,"mat-label"),d(45,"Gender:"),l(),c(46,"mat-radio-group",16)(47,"mat-radio-button",17),d(48," Male "),l(),c(49,"mat-radio-button",18),d(50," Female "),l()(),f(51,Dc,2,0,"mat-error",10),c(52,"mat-card-actions",19)(53,"button",20),d(54,"Register"),l()()()()()()),r&2&&(u(8),h("routerLink",B(15,Tc)),u(3),h("formGroup",o.registrationForm),u(5),h("ngIf",o.registrationFormControl.firstname.touched&&(o.registrationFormControl.firstname.errors==null?null:o.registrationFormControl.firstname.errors.required)),u(5),h("ngIf",o.registrationFormControl.lastname.touched&&(o.registrationFormControl.lastname.errors==null?null:o.registrationFormControl.lastname.errors.required)),u(5),h("ngIf",o.registrationFormControl.username.touched&&(o.registrationFormControl.username.errors==null?null:o.registrationFormControl.username.errors.required)),u(),h("ngIf",o.registrationFormControl.username.touched&&(o.registrationFormControl.username.errors==null?null:o.registrationFormControl.username.errors.userNameNotAvailable)),u(4),h("type",o.showPassword?"password":"text"),u(2),D(o.showPassword?"visibility_off":"visibility"),u(),h("ngIf",o.registrationFormControl.password.touched&&(o.registrationFormControl.password.errors==null?null:o.registrationFormControl.password.errors.required)),u(),h("ngIf",o.registrationFormControl.password.touched&&(o.registrationFormControl.password.errors==null?null:o.registrationFormControl.password.errors.passwordValidation)),u(4),h("type",o.showConfirmPassword?"password":"text"),u(2),ae(" ",o.showConfirmPassword?"visibility_off":"visibility",""),u(),h("ngIf",o.registrationFormControl.confirmPassword.touched&&(o.registrationFormControl.confirmPassword.errors==null?null:o.registrationFormControl.confirmPassword.errors.required)),u(),h("ngIf",o.registrationFormControl.confirmPassword.touched&&(o.registrationFormControl.confirmPassword.errors==null?null:o.registrationFormControl.confirmPassword.errors.passwordMismatch)),u(8),h("ngIf",o.registrationFormControl.gender.touched&&(o.registrationFormControl.gender.errors==null?null:o.registrationFormControl.gender.errors.required)))},dependencies:[U,G,Q,At,Y,re,ne,rt,nt,it,xt,bi,ze,Jr,Zr,Ze,Ue,qe,Je,Mt,It,kt,ee]});let n=e;return n})();var is=(()=>{let e=class e{constructor(i){this.bookService=i,this.priceValue=new sr(!0),this.step=100,this.thumbLabel=!0,this.destroyed$=new hi(1)}ngOnInit(){this.setPriceFilterProperties()}setPriceFilterProperties(){this.bookService.books$.pipe($(this.destroyed$)).subscribe(i=>{this.setMinValue(i),this.setMaxValue(i)})}formatLabel(i){return i>=1e3?Math.round(i/1e3)+"k":i}onChange(){this.priceValue.emit(this.value)}setMinValue(i){this.min=i.reduce((r,o)=>r.price<o.price?r:o).price}setMaxValue(i){this.value=this.max=i.reduce((r,o)=>r.price>o.price?r:o).price}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(Pe))},e.\u0275cmp=M({type:e,selectors:[["app-price-filter"]],outputs:{priceValue:"priceValue"},decls:19,vars:14,consts:[[1,"my-4"],[1,"mat-elevation-z2","custom-card-header","justify-content-between"],[1,"mat-h1"],[1,"w-100","m-0",3,"max","min","step","discrete","displayWith"],["matSliderThumb","",3,"ngModelChange","change","ngModel"],[1,"d-flex","justify-content-between"]],template:function(r,o){r&1&&(c(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title",2),d(3," Price Filter "),l()(),c(4,"mat-card-content")(5,"mat-slider",3)(6,"input",4),fr("ngModelChange",function(a){return hr(o.value,a)||(o.value=a),a}),x("change",function(){return o.onChange()}),l()()(),c(7,"mat-card-content")(8,"div",5)(9,"div")(10,"strong"),d(11),O(12,"currency"),l()(),c(13,"div"),d(14,"to"),l(),c(15,"div")(16,"strong"),d(17),O(18,"currency"),l()()()()()),r&2&&(u(5),h("max",o.max)("min",o.min)("step",o.step)("discrete",o.thumbLabel)("displayWith",o.formatLabel),u(),pr("ngModel",o.value),u(5),D(ie(12,8,o.min,"INR")),u(6),D(ie(18,11,o.value,"INR")))},dependencies:[Q,Y,re,ne,eo,to,Ue,qe,Ar,be]});let n=e;return n})();function Fc(n,e){if(n&1&&(c(0,"div",11),v(1,"app-book-card",12),l()),n&2){let t=e.$implicit;u(),h("book",t)}}function Lc(n,e){if(n&1&&(c(0,"div",9),f(1,Fc,2,1,"div",10),l()),n&2){let t=k();u(),h("ngForOf",t.books)}}function Bc(n,e){n&1&&(c(0,"h1",15),d(1,"No books found."),l())}function $c(n,e){if(n&1&&(c(0,"div",13),f(1,Bc,2,0,"h1",14),l()),n&2){let t=k();u(),h("ngIf",!t.isLoading)}}function jc(n,e){n&1&&(c(0,"div",16),v(1,"mat-spinner"),l())}var Qi=(()=>{let e=class e{constructor(i,r,o){this.route=i,this.bookService=r,this.subscriptionService=o,this.priceRange=Number.MAX_SAFE_INTEGER}ngOnInit(){this.isLoading=!0,this.getAllBookData()}getAllBookData(){this.bookService.books$.pipe(Qe(i=>(this.filteredProducts=i,this.route.queryParams))).subscribe(i=>{this.category=i.category,this.searchItem=i.item,this.subscriptionService.searchItemValue$.next(this.searchItem),this.filterBookData()})}filterPrice(i){this.priceRange=i,this.filterBookData()}filterBookData(){let i=this.filteredProducts.filter(r=>r.price<=this.priceRange).slice();this.category?this.books=i.filter(r=>r.category.toLowerCase()===this.category.toLowerCase()):this.searchItem?this.books=i.filter(r=>r.title.toLowerCase().indexOf(this.searchItem)!==-1||r.author.toLowerCase().indexOf(this.searchItem)!==-1):this.books=i,this.isLoading=!1}ngOnDestroy(){this.subscriptionService.searchItemValue$.next("")}};e.\u0275fac=function(r){return new(r||e)(y(et),y(Pe),y(j))},e.\u0275cmp=M({type:e,selectors:[["app-home"]],decls:10,vars:4,consts:[["nodata",""],[1,"row","no-gutters","pt-3"],[1,"col-md-3","col-sm-12"],[1,"filter-container"],[3,"category"],[3,"priceValue"],[1,"col","mb-3"],["class","d-flex justify-content-start card-deck-container mb-4",4,"ngIf","ngIfElse"],["class","d-flex align-items-center justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-start","card-deck-container","mb-4"],["class","p-1",4,"ngFor","ngForOf"],[1,"p-1"],[3,"book"],[1,"d-flex","justify-content-center","mt-4"],["class","display-4",4,"ngIf"],[1,"display-4"],[1,"d-flex","align-items-center","justify-content-center"]],template:function(r,o){if(r&1){let s=J();c(0,"div",1)(1,"div",2)(2,"div",3),v(3,"app-book-filter",4),c(4,"app-price-filter",5),x("priceValue",function(m){return z(s),K(o.filterPrice(m))}),l()()(),c(5,"div",6),f(6,Lc,2,1,"div",7)(7,$c,2,1,"ng-template",null,0,Z)(9,jc,2,0,"div",8),l()()}if(r&2){let s=V(8);u(3),h("category",o.category),u(3),h("ngIf",(o.books==null?null:o.books.length)>0)("ngIfElse",s),u(3),h("ngIf",o.isLoading)}},dependencies:[xe,U,Ce,zi,Wo,is],styles:[".card-deck-container[_ngcontent-%COMP%]{flex-flow:row wrap;-webkit-box-orient:horizontal;-ms-box-orient:horizontal;-moz-box-orient:horizontal;-webkit-box-direction:normal;-ms-box-direction:normal;-moz-box-direction:normal;-webkit-box-flex:1;-ms-box-flex:1;-moz-box-flex:1;width:100%}.filter-container[_ngcontent-%COMP%]{position:fixed;width:250px}@media only screen and (max-width: 768px){.filter-container[_ngcontent-%COMP%]{position:relative;width:100%}}"]});let n=e;return n})();var Vc=()=>["/"],Uc=()=>["/checkout"],qc=n=>["/books/details/",n];function zc(n,e){n&1&&(c(0,"div",8),v(1,"mat-spinner"),l())}function Kc(n,e){n&1&&(c(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title",4),d(3,"Your shopping cart is empty."),l()(),c(4,"mat-card-content")(5,"button",9),d(6," Continue shopping "),l()()()),n&2&&(u(5),h("routerLink",B(1,Vc)))}function Hc(n,e){if(n&1&&f(0,zc,2,0,"div",7)(1,Kc,7,2,"ng-template",null,1,Z),n&2){let t=V(2),i=k();h("ngIf",i.isLoading)("ngIfElse",t)}}function Wc(n,e){if(n&1){let t=J();c(0,"div")(1,"button",10),x("click",function(){z(t);let r=k();return K(r.clearCart())}),d(2," Clear cart "),l()()}}function Gc(n,e){n&1&&(c(0,"th",25),d(1,"Image"),l())}function Qc(n,e){if(n&1&&(c(0,"td",23),v(1,"img",26),l()),n&2){let t=e.$implicit;u(),He("matTooltip",t.book.title),Xe("src","/Upload/",t.book.coverFileName,"",Ye)}}function Yc(n,e){n&1&&(c(0,"th",25),d(1,"Title"),l())}function Xc(n,e){if(n&1&&(c(0,"td",23)(1,"a",27),d(2),l()()),n&2){let t=e.$implicit;u(),h("routerLink",De(2,qc,t.book.bookId)),u(),D(t.book.title)}}function Jc(n,e){n&1&&(c(0,"th",25),d(1,"Price"),l())}function Zc(n,e){if(n&1&&(c(0,"td",23),d(1),O(2,"currency"),l()),n&2){let t=e.$implicit;u(),ae(" ",ie(2,1,t.book.price,"INR")," ")}}function em(n,e){n&1&&(c(0,"th",25),d(1,"Quantity"),l())}function tm(n,e){if(n&1){let t=J();c(0,"td",23)(1,"div",28)(2,"div")(3,"button",29),x("click",function(){let r=z(t).$implicit,o=k(2);return K(o.deleteOneCartItem(r.book.bookId))}),c(4,"mat-icon"),d(5,"remove_circle"),l()()(),c(6,"div"),d(7),l(),c(8,"div")(9,"button",30),x("click",function(){let r=z(t).$implicit,o=k(2);return K(o.addToCart(r.book.bookId))}),c(10,"mat-icon"),d(11,"add_circle"),l()()()()()}if(n&2){let t=e.$implicit;u(3),h("disabled",t.quantity<2),u(4),D(t.quantity)}}function im(n,e){n&1&&(c(0,"th",25),d(1,"Total"),l())}function nm(n,e){if(n&1&&(c(0,"td",23),d(1),O(2,"currency"),l()),n&2){let t=e.$implicit;u(),ae(" ",ie(2,1,t.book.price*t.quantity,"INR")," ")}}function rm(n,e){n&1&&(c(0,"th",25),d(1,"Action"),l())}function om(n,e){if(n&1){let t=J();c(0,"td",23)(1,"button",31),x("click",function(){let r=z(t).$implicit,o=k(2);return K(o.deleteCartItem(r.book.bookId))}),c(2,"mat-icon"),d(3,"delete"),l()()()}}function sm(n,e){n&1&&v(0,"tr",32)}function am(n,e){n&1&&v(0,"tr",33)}function lm(n,e){if(n&1&&(A(0),c(1,"mat-card-content",11)(2,"table",12),A(3,13),f(4,Gc,2,0,"th",14)(5,Qc,2,3,"td",15),P(),A(6,16),f(7,Yc,2,0,"th",14)(8,Xc,3,4,"td",15),P(),A(9,17),f(10,Jc,2,0,"th",14)(11,Zc,3,4,"td",15),P(),A(12,18),f(13,em,2,0,"th",14)(14,tm,12,2,"td",15),P(),A(15,19),f(16,im,2,0,"th",14)(17,nm,3,4,"td",15),P(),A(18,20),f(19,rm,2,0,"th",14)(20,om,4,0,"td",15),P(),f(21,sm,1,0,"tr",21)(22,am,1,0,"tr",22),l()(),c(23,"mat-card-content"),A(24,20),v(25,"td",23)(26,"td",23)(27,"td",23),c(28,"td",23)(29,"strong"),d(30,"Cart Total:"),l()(),c(31,"td",23)(32,"strong"),d(33),O(34,"currency"),l()(),c(35,"td",23)(36,"button",24),d(37," CheckOut "),l()(),P(),l(),P()),n&2){let t=k();u(2),h("dataSource",t.cartItems),u(19),h("matHeaderRowDef",t.displayedColumns),u(),h("matRowDefColumns",t.displayedColumns),u(11),D(ie(34,5,t.totalPrice,"INR")),u(3),h("routerLink",B(8,Uc))}}var ns=(()=>{let e=class e{constructor(i,r,o){this.cartService=i,this.snackBarService=r,this.subscriptionService=o,this.unsubscribe$=new se,this.displayedColumns=["image","title","price","quantity","total","action"],this.userId=localStorage.getItem("userId")}ngOnInit(){this.cartItems=[],this.isLoading=!0,this.getShoppingCartItems()}getShoppingCartItems(){this.cartService.getCartItems(this.userId).pipe($(this.unsubscribe$)).subscribe({next:i=>{this.cartItems=i,this.getTotalPrice(),this.isLoading=!1},error:i=>{console.log("Error ocurred while fetching shopping cart item : ",i)}})}getTotalPrice(){this.totalPrice=0,this.cartItems.forEach(i=>{this.totalPrice+=i.book.price*i.quantity})}deleteCartItem(i){this.cartService.removeCartItems(this.userId,i).pipe($(this.unsubscribe$)).subscribe({next:r=>{this.subscriptionService.cartItemcount$.next(r),this.getShoppingCartItems(),this.snackBarService.showSnackBar("Product removed from cart")},error:r=>{console.log("Error ocurred while deleting cart item : ",r)}})}addToCart(i){this.cartService.addBookToCart(this.userId,i).pipe($(this.unsubscribe$)).subscribe({next:r=>{this.subscriptionService.cartItemcount$.next(r),this.getShoppingCartItems(),this.snackBarService.showSnackBar("One item added to cart")},error:r=>{console.log("Error ocurred while addToCart data : ",r)}})}deleteOneCartItem(i){this.cartService.deleteOneCartItem(this.userId,i).pipe($(this.unsubscribe$)).subscribe({next:r=>{this.subscriptionService.cartItemcount$.next(r),this.snackBarService.showSnackBar("One item removed from cart"),this.getShoppingCartItems()},error:r=>{console.log("Error ocurred while fetching book data : ",r)}})}clearCart(){this.cartService.clearCart(this.userId).pipe($(this.unsubscribe$)).subscribe({next:i=>{this.subscriptionService.cartItemcount$.next(i),this.snackBarService.showSnackBar("Cart cleared!!!"),this.getShoppingCartItems()},error:i=>{console.log("Error ocurred while deleting cart item : ",i)}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(lt),y(Oe),y(j))},e.\u0275cmp=M({type:e,selectors:[["app-shoppingcart"]],decls:8,vars:3,consts:[["emptycart",""],["noData",""],[1,"my-4"],[1,"mat-elevation-z2","custom-card-header","justify-content-between"],[1,"mat-h1"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-center"],["mat-raised-button","","color","primary",1,"mt-2",3,"routerLink"],["mat-raised-button","",1,"mat-elevation-z4",3,"click"],[1,"my-3"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","quantity"],["matColumnDef","total"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell",""],["mat-raised-button","","color","warn",1,"my-2",3,"routerLink"],["mat-header-cell",""],["matTooltipPosition","after",1,"my-2",3,"matTooltip","src"],[3,"routerLink"],[1,"d-flex","align-items-center"],["mat-icon-button","","color","warn",3,"click","disabled"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","accent","matTooltip","Delete item",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,o){if(r&1&&(f(0,Hc,3,2,"ng-template",null,0,Z),c(2,"mat-card",2)(3,"mat-card-header",3)(4,"mat-card-title",4),d(5," Shopping cart "),l(),f(6,Wc,3,0,"div",5),l(),f(7,lm,38,9,"ng-container",6),l()),r&2){let s=V(1);u(6),h("ngIf",(o.cartItems==null?null:o.cartItems.length)>0),u(),h("ngIf",(o.cartItems==null?null:o.cartItems.length)>0)("ngIfElse",s)}},dependencies:[U,G,Si,Q,Y,re,ne,Pt,Nt,Lt,Dt,Ot,Bt,Rt,Ft,$t,jt,ze,Ce,tt,ee,be],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{width:18%}td[_ngcontent-%COMP%]:last-child{width:20%}img[_ngcontent-%COMP%]{width:50%}"]});let n=e;return n})();var cm=()=>["/"],rs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=M({type:e,selectors:[["app-page-not-found"]],decls:7,vars:2,consts:[[1,"my-3"],["mat-raised-button","","color","primary",1,"mt-2",3,"routerLink"]],template:function(r,o){r&1&&(c(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),d(3," The resource you are looking for is not found. "),l()(),c(4,"mat-card-content")(5,"button",1),d(6," Back to Home "),l()()()),r&2&&(u(5),h("routerLink",B(1,cm)))},dependencies:[G,Q,Y,re,ne,ee]});let n=e;return n})();function os(n,e){let t=localStorage.getItem("authToken");return t&&(n=n.clone({setHeaders:{Authorization:`Bearer ${t}`}})),e(n)}var ss=(n,e)=>{let t=Zi(st),i=Zi(he);return e(n).pipe(fi(r=>(console.log(r),r.status===401?(t.logout(),n.url.includes("login")||location.reload()):r.status===404&&i.navigate(["not-found"]),ir(()=>r.message))))};var Yi=(()=>{let e=class e{constructor(i){this.router=i}canActivate(i,r){return localStorage.getItem("authToken")?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:r.url}}),!1)}};e.\u0275fac=function(r){return new(r||e)(q(he))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Qn=(()=>{let e=class e{constructor(i,r){this.router=i,this.subscriptionService=r,this.userData=new Fe,this.userDataSubscription=this.subscriptionService.userData$.asObservable().subscribe(o=>{this.userData=o})}canActivate(i,r){return this.userData.userTypeId===zt.admin?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:r.url}}),!1)}canActivateChild(i,r){return this.canActivate(i,r)}canLoad(i){let r=`/${i.path}`;return this.userData.userTypeId===zt.admin?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:r}}),!1)}};e.\u0275fac=function(r){return new(r||e)(q(he),q(j))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var mm=()=>["/"],dm=n=>["/books/details/",n];function um(n,e){n&1&&(c(0,"div",4),v(1,"mat-spinner"),l())}function pm(n,e){n&1&&(A(0),c(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title",5),d(4,"Your wishlist is empty."),l()(),c(5,"mat-card-content")(6,"button",6),d(7," Continue shopping "),l()()(),P()),n&2&&(u(6),h("routerLink",B(1,mm)))}function hm(n,e){if(n&1&&f(0,pm,8,2,"ng-container",2),n&2){let t=k(2);h("ngIf",!t.isLoading)}}function fm(n,e){if(n&1&&f(0,um,2,0,"div",3)(1,hm,1,1,"ng-template",null,1,Z),n&2){let t=V(2),i=k();h("ngIf",i.isLoading)("ngIfElse",t)}}function gm(n,e){if(n&1){let t=J();c(0,"div")(1,"button",10),x("click",function(){z(t);let r=k(2);return K(r.clearWishlist())}),d(2," Clear Wishlist "),l()()}}function _m(n,e){n&1&&(c(0,"th",22),d(1,"Image"),l())}function ym(n,e){if(n&1&&(c(0,"td",23),v(1,"img",24),l()),n&2){let t=e.$implicit;u(),He("matTooltip",t.title),Xe("src","/Upload/",t.coverFileName,"",Ye)}}function vm(n,e){n&1&&(c(0,"th",22),d(1,"Title"),l())}function Sm(n,e){if(n&1&&(c(0,"td",23)(1,"a",25),d(2),l()()),n&2){let t=e.$implicit;u(),h("routerLink",De(2,dm,t.bookId)),u(),D(t.title)}}function bm(n,e){n&1&&(c(0,"th",22),d(1,"Price"),l())}function Cm(n,e){if(n&1&&(c(0,"td",23),d(1),O(2,"currency"),l()),n&2){let t=e.$implicit;u(),ae(" ",ie(2,1,t.price,"INR")," ")}}function Em(n,e){n&1&&(c(0,"th",22),d(1,"Cart"),l())}function wm(n,e){if(n&1&&(c(0,"td",23),v(1,"app-addtocart",26),l()),n&2){let t=e.$implicit;u(),h("bookId",t.bookId)}}function Tm(n,e){n&1&&(c(0,"th",22),d(1,"Wishlist"),l())}function Im(n,e){if(n&1&&(c(0,"td",23),v(1,"app-addtowishlist",27),l()),n&2){let t=e.$implicit;u(),h("bookId",t.bookId)("showButton",!0)}}function km(n,e){n&1&&v(0,"tr",28)}function Mm(n,e){n&1&&v(0,"tr",29)}function xm(n,e){if(n&1&&(A(0),c(1,"mat-card-content",11)(2,"table",12),A(3,13),f(4,_m,2,0,"th",14)(5,ym,2,3,"td",15),P(),A(6,16),f(7,vm,2,0,"th",14)(8,Sm,3,4,"td",15),P(),A(9,17),f(10,bm,2,0,"th",14)(11,Cm,3,4,"td",15),P(),A(12,18),f(13,Em,2,0,"th",14)(14,wm,2,1,"td",15),P(),A(15,19),f(16,Tm,2,0,"th",14)(17,Im,2,2,"td",15),P(),f(18,km,1,0,"tr",20)(19,Mm,1,0,"tr",21),l()(),P()),n&2){let t=k().ngIf,i=k();u(2),h("dataSource",t),u(16),h("matHeaderRowDef",i.displayedColumns),u(),h("matRowDefColumns",i.displayedColumns)}}function Am(n,e){if(n&1&&(A(0),c(1,"mat-card",7)(2,"mat-card-header",8)(3,"mat-card-title",5),d(4," My wishlist "),l(),f(5,gm,3,0,"div",2),l(),f(6,xm,20,3,"ng-container",9),l(),P()),n&2){let t=e.ngIf;k();let i=V(1);u(5),h("ngIf",(t==null?null:t.length)>0),u(),h("ngIf",(t==null?null:t.length)>0)("ngIfElse",i)}}var as=(()=>{let e=class e{constructor(i,r,o){this.subscriptionService=i,this.wishlistService=r,this.snackBarService=o,this.displayedColumns=["image","title","price","cart","wishlist"],this.unsubscribe$=new se,this.userId=localStorage.getItem("userId")}ngOnInit(){this.isLoading=!0,this.getWishlistItems()}getWishlistItems(){this.wishlistItems$=this.subscriptionService.wishlistItem$,this.isLoading=!1}clearWishlist(){this.wishlistService.clearWishlist(this.userId).pipe($(this.unsubscribe$)).subscribe({next:i=>{this.subscriptionService.wishlistItemcount$.next(i),this.snackBarService.showSnackBar("Wishlist cleared!!!")},error:i=>{console.log("Error ocurred while deleting wishlist item : ",i)}})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}};e.\u0275fac=function(r){return new(r||e)(y(j),y(at),y(Oe))},e.\u0275cmp=M({type:e,selectors:[["app-wishlist"]],decls:4,vars:3,consts:[["emptyWishllist",""],["noData",""],[4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-center"],[1,"mat-h1"],["mat-raised-button","","color","primary",1,"mt-2",3,"routerLink"],[1,"my-4"],[1,"mat-elevation-z2","custom-card-header","justify-content-between"],[4,"ngIf","ngIfElse"],["mat-raised-button","",1,"mat-elevation-z4",3,"click"],[1,"my-3"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","cart"],["matColumnDef","wishlist"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matTooltipPosition","after",1,"my-2",3,"matTooltip","src"],[3,"routerLink"],[3,"bookId"],[3,"bookId","showButton"],["mat-header-row",""],["mat-row",""]],template:function(r,o){r&1&&(f(0,fm,3,2,"ng-template",null,0,Z)(2,Am,7,3,"ng-container",2),O(3,"async")),r&2&&(u(2),h("ngIf",te(3,1,o.wishlistItems$)))},dependencies:[U,G,Q,Y,re,ne,Pt,Nt,Lt,Dt,Ot,Bt,Rt,Ft,$t,jt,Ce,tt,ee,Ht,Wt,Se,be],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{width:18%}td[_ngcontent-%COMP%]:last-child{width:20%}img[_ngcontent-%COMP%]{width:50%}"]});let n=e;return n})();var Pm=[{path:"",component:Qi,pathMatch:"full"},{path:"filter",component:Qi},{path:"search",component:Qi},{path:"login",component:Yo},{path:"register",component:ts},{path:"books/details/:id",component:Ho},{path:"shopping-cart",component:ns},{path:"checkout",component:Qo,canActivate:[Yi]},{path:"myorders",component:Zo,canActivate:[Yi]},{path:"wishlist",component:as,canActivate:[Yi]},{path:"admin/books",loadChildren:()=>import("./chunk-Y7NPMAB2.js").then(n=>n.AdminModule),canLoad:[Qn],canActivate:[Qn]},{path:"**",component:rs}],ls=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Et({type:e}),e.\u0275inj=Ct({imports:[gi,on.forRoot(Pm,{scrollPositionRestoration:"top"}),on]});let n=e;return n})();var cs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Et({type:e,bootstrap:[Fo]}),e.\u0275inj=Ct({providers:[Sr(br([os,ss]))],imports:[gi,io,_i,Nr,Or,No,ls]});let n=e;return n})();var ms={production:!0};ms.production&&void 0;Er().bootstrapModule(cs).catch(n=>console.error(n));
